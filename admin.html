<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administra√ß√£o - Liga do Bem</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-screen" class="login-container">
        <div class="login-box animate-in">
            <h1>üêæ Liga do Bem</h1>
            <h2>√Årea Administrativa</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Usu√°rio:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">Entrar</button>
            </form>
            <div id="login-error" class="alert alert-error" style="display: none; margin-top: 1rem;">
                Usu√°rio ou senha incorretos!
            </div>
            <div style="margin-top: 1rem; text-align: center;">
                <small style="color: #666;">
                    Credenciais de teste:<br>
                    Usu√°rio: <strong>admin</strong><br>
                    Senha: <strong>123</strong>
                </small>
                <br><br>
                <button type="button" onclick="autoLogin()" style="background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">
                    üöÄ Login Autom√°tico (Teste)
                </button>
            </div>
        </div>
    </div>

    <!-- Interface Administrativa -->
    <div id="admin-interface" class="admin-container">
        <!-- Header -->
        <header class="admin-header">
            <!-- Menu Toggle -->
            <button class="menu-toggle" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="admin-logo">
                <span class="logo-icon">üêæ</span>
                <span class="logo-text">Liga do Bem</span>
                <span class="logo-subtitle">Administra√ß√£o</span>
            </div>
            
            <div class="admin-user">
                <div class="user-dropdown" onclick="toggleUserMenu()">
                    <div class="user-avatar">
                        <span class="user-icon">üë§</span>
                        <span class="user-name">Admin</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </div>
                    <div class="user-menu" id="user-menu">
                        <div class="user-menu-header">
                            <div class="user-details">
                                <strong>Administrador</strong>
                                <small>admin@ligadobem.org</small>
                            </div>
                        </div>
                        <div class="user-menu-divider"></div>
                        <div class="user-menu-items">
                            <button class="user-menu-item" onclick="showUserProfile()">
                                <span class="menu-item-icon">‚öôÔ∏è</span>
                                <span class="menu-item-text">Configura√ß√µes</span>
                            </button>
                            <button class="user-menu-item" onclick="showHelp()">
                                <span class="menu-item-icon">‚ùì</span>
                                <span class="menu-item-text">Ajuda</span>
                            </button>
                            <div class="user-menu-divider"></div>
                            <button class="user-menu-item logout-item" onclick="confirmLogout()">
                                <span class="menu-item-icon">üö™</span>
                                <span class="menu-item-text">Sair</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <nav class="admin-sidebar" id="admin-sidebar">
            <div class="sidebar-content">
                <!-- Dashboard -->
                <div class="nav-section">
                    <button class="nav-btn primary active" onclick="showSection('dashboard')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Dashboard</span>
                    </button>
                </div>
                
                <!-- Gest√£o de Animais -->
                <div class="nav-section">
                    <div class="nav-category">üêï Animais</div>
                    <button class="nav-btn" onclick="showSection('pets')">
                        <span class="nav-icon">üêæ</span>
                        <span class="nav-text">Pets</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('medical')">
                        <span class="nav-icon">üè•</span>
                        <span class="nav-text">Veterin√°rio</span>
                    </button>
                </div>
                
                <!-- Gest√£o de Pessoas -->
                <div class="nav-section">
                    <div class="nav-category">üë• Pessoas</div>
                    <button class="nav-btn" onclick="showSection('volunteers')">
                        <span class="nav-icon">üôã‚Äç‚ôÄÔ∏è</span>
                        <span class="nav-text">Volunt√°rios</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('visits')">
                        <span class="nav-icon">üëÅÔ∏è</span>
                        <span class="nav-text">Visitas</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('adoptions')">
                        <span class="nav-icon">‚ù§Ô∏è</span>
                        <span class="nav-text">Ado√ß√µes</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('sponsors')">
                        <span class="nav-icon">ü§ù</span>
                        <span class="nav-text">Padrinhos</span>
                    </button>
                </div>
                
                <!-- Atividades -->
                <div class="nav-section">
                    <div class="nav-category">üéØ Atividades</div>
                    <button class="nav-btn" onclick="showSection('events')">
                        <span class="nav-icon">üéâ</span>
                        <span class="nav-text">Eventos</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('donations')">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-text">Doa√ß√µes</span>
                    </button>
                </div>

                <!-- Vitrine P√∫blica -->
                <div class="nav-section">
                    <div class="nav-category">üåü Vitrine P√∫blica</div>
                    <button class="nav-btn" onclick="showSection('public-volunteers')">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-text">Hall da Fama</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('public-transparency')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Transpar√™ncia</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('public-campaigns')">
                        <span class="nav-icon">üéØ</span>
                        <span class="nav-text">Campanhas</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('public-settings')">
                        <span class="nav-icon">üëÅÔ∏è</span>
                        <span class="nav-text">Visibilidade</span>
                    </button>
                </div>
                
                <!-- Sistema -->
                <div class="nav-section">
                    <div class="nav-category">‚öôÔ∏è Sistema</div>
                    <button class="nav-btn" onclick="showSection('messages')">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Mensagens</span>
                        <span class="nav-badge" id="messages-badge">0</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('stats')">
                        <span class="nav-icon">üìà</span>
                        <span class="nav-text">Relat√≥rios</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('content')">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-text">Conte√∫do</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('backup')">
                        <span class="nav-icon">üíæ</span>
                        <span class="nav-text">Backup</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Dashboard Moderno -->
            <section id="dashboard-section" class="admin-section active">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h2>üè† Dashboard</h2>
                        <p class="dashboard-subtitle">Vis√£o geral da Liga do Bem</p>
                    </div>
                    <div class="dashboard-actions">
                        <button class="btn btn-primary" onclick="refreshDashboard()">
                            <span class="btn-icon">üîÑ</span>
                            Atualizar
                        </button>
                        <button class="btn btn-secondary" onclick="exportReport()">
                            <span class="btn-icon">üìä</span>
                            Relat√≥rio
                        </button>
                    </div>
                </div>

                <!-- Cards de Estat√≠sticas Principais -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-icon">üêæ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-pets">0</div>
                            <div class="stat-label">Pets Cadastrados</div>
                            <div class="stat-change positive" id="pets-change">+0 este m√™s</div>
                        </div>
                    </div>
                    
                    <div class="stat-card success">
                        <div class="stat-icon">‚ù§Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-adoptions">0</div>
                            <div class="stat-label">Ado√ß√µes Realizadas</div>
                            <div class="stat-change positive" id="adoptions-change">+0 este m√™s</div>
                        </div>
                    </div>
                    
                    <div class="stat-card warning">
                        <div class="stat-icon">üôã‚Äç‚ôÄÔ∏è</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-volunteers">0</div>
                            <div class="stat-label">Volunt√°rios Ativos</div>
                            <div class="stat-change positive" id="volunteers-change">+0 este m√™s</div>
                        </div>
                    </div>
                    
                    <div class="stat-card info">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-balance">R$ 0</div>
                            <div class="stat-label">Saldo Atual</div>
                            <div class="stat-change" id="balance-change">R$ 0 este m√™s</div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos e An√°lises -->
                <div class="dashboard-content">
                    <div class="dashboard-row">
                        <!-- Gr√°fico de Ado√ß√µes -->
                        <div class="dashboard-card chart-card">
                            <div class="card-header">
                                <h3>üìà Ado√ß√µes por M√™s</h3>
                                <div class="card-actions">
                                    <select id="adoption-period" onchange="updateAdoptionChart()">
                                        <option value="6">√öltimos 6 meses</option>
                                        <option value="12">√öltimo ano</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="adoptions-chart"></canvas>
                            </div>
                        </div>

                        <!-- Distribui√ß√£o de Pets -->
                        <div class="dashboard-card chart-card">
                            <div class="card-header">
                                <h3>üêï Distribui√ß√£o de Pets</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="pets-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-row">
                        <!-- Atividades Recentes -->
                        <div class="dashboard-card activity-card">
                            <div class="card-header">
                                <h3>üïí Atividades Recentes</h3>
                                <button class="btn-link" onclick="showSection('messages')">Ver todas</button>
                            </div>
                            <div class="activity-list" id="recent-activities">
                                <!-- Atividades ser√£o carregadas aqui -->
                            </div>
                        </div>

                        <!-- Pets em Destaque -->
                        <div class="dashboard-card pets-card">
                            <div class="card-header">
                                <h3>‚≠ê Pets em Destaque</h3>
                                <button class="btn-link" onclick="showSection('pets')">Ver todos</button>
                            </div>
                            <div class="featured-pets" id="featured-pets">
                                <!-- Pets em destaque ser√£o carregados aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Alertas e Notifica√ß√µes -->
                    <div class="dashboard-row">
                        <div class="dashboard-card alerts-card">
                            <div class="card-header">
                                <h3>üö® Alertas e Lembretes</h3>
                            </div>
                            <div class="alerts-list" id="dashboard-alerts">
                                <!-- Alertas ser√£o carregados aqui -->
                            </div>
                        </div>
                    </div>

                    <!-- Resumo Financeiro -->
                    <div class="dashboard-row">
                        <div class="dashboard-card financial-card">
                            <div class="card-header">
                                <h3>üí≥ Resumo Financeiro</h3>
                                <button class="btn-link" onclick="showSection('donations')">Ver detalhes</button>
                            </div>
                            <div class="financial-summary">
                                <div class="financial-item income">
                                    <div class="financial-icon">üìà</div>
                                    <div class="financial-content">
                                        <div class="financial-label">Receitas</div>
                                        <div class="financial-value" id="total-income">R$ 0,00</div>
                                    </div>
                                </div>
                                <div class="financial-item expense">
                                    <div class="financial-icon">üìâ</div>
                                    <div class="financial-content">
                                        <div class="financial-label">Despesas</div>
                                        <div class="financial-value" id="total-expenses">R$ 0,00</div>
                                    </div>
                                </div>
                                <div class="financial-item balance">
                                    <div class="financial-icon">üí∞</div>
                                    <div class="financial-content">
                                        <div class="financial-label">Saldo</div>
                                        <div class="financial-value" id="current-balance">R$ 0,00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="financial-chart">
                                <canvas id="financial-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gerenciamento de Pets -->
            <section id="pets-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Pets</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Adicionar Novo Pet</h3>
                        <button class="btn btn-primary" onclick="togglePetForm()">+ Novo Pet</button>
                    </div>
                    
                    <form id="pet-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pet-name">Nome:</label>
                                <input type="text" id="pet-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="pet-type">Tipo:</label>
                                <select id="pet-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="C√£o">C√£o</option>
                                    <option value="Gata">Gata</option>
                                    <option value="Gato">Gato</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pet-age">Idade:</label>
                                <input type="text" id="pet-age" name="age" placeholder="Ex: 2 anos" required>
                            </div>
                            <div class="form-group">
                                <label for="pet-emoji">Emoji:</label>
                                <input type="text" id="pet-emoji" name="emoji" placeholder="üê∂" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pet-description">Descri√ß√£o:</label>
                            <textarea id="pet-description" name="description" required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Foto do Pet:</label>
                            <div class="photo-upload-container" id="pet-photo-upload" onclick="document.getElementById('pet-photo-input').click()">
                                <input type="file" id="pet-photo-input" class="photo-upload-input" accept="image/*" onchange="handlePhotoUpload(event, 'pet')">
                                <div class="photo-upload-icon">üì∑</div>
                                <div class="photo-upload-text" id="pet-photo-text">
                                    Clique aqui ou arraste uma foto do pet<br>
                                    <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
                                </div>
                                <div id="pet-photo-preview-container" style="display: none;">
                                    <img id="pet-photo-preview" class="photo-preview" alt="Preview da foto">
                                    <button type="button" class="remove-photo-btn" onclick="removePhoto('pet')">Remover Foto</button>
                                </div>
                            </div>
                            <div id="pet-photo-error" class="file-size-warning" style="display: none;"></div>
                        </div>
                        <div class="form-group">
                            <label>Tags:</label>
                            <div class="tags-input" id="pet-tags">
                                <input type="text" class="tag-input" placeholder="Digite uma tag e pressione Enter">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pet-status">Status:</label>
                            <select id="pet-status" name="status" required>
                                <option value="Dispon√≠vel">Dispon√≠vel</option>
                                <option value="Em Processo">Em Processo</option>
                                <option value="Adotado">Adotado</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Salvar Pet</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelPetForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Pets</h3>
                    <table class="data-table" id="pets-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>Idade</th>
                                <th>Status</th>
                                <th>Data</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="pets-table-body">
                            <!-- Pets will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Gerenciamento de Volunt√°rios -->
            <section id="volunteers-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Volunt√°rios</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Cadastrar Novo Volunt√°rio</h3>
                        <button class="btn btn-primary" onclick="toggleVolunteerForm()">+ Novo Volunt√°rio</button>
                    </div>
                    
                    <form id="volunteer-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-name">Nome Completo:</label>
                                <input type="text" id="volunteer-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="volunteer-email">Email:</label>
                                <input type="email" id="volunteer-email" name="email" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-phone">Telefone:</label>
                                <input type="text" id="volunteer-phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="volunteer-availability">Disponibilidade:</label>
                                <select id="volunteer-availability" name="availability" required>
                                    <option value="">Selecione...</option>
                                    <option value="Manh√£">Manh√£</option>
                                    <option value="Tarde">Tarde</option>
                                    <option value="Noite">Noite</option>
                                    <option value="Fins de semana">Fins de semana</option>
                                    <option value="Flex√≠vel">Flex√≠vel</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="volunteer-skills">Habilidades/Experi√™ncia:</label>
                            <textarea id="volunteer-skills" name="skills" placeholder="Ex: Veterin√°ria, Fotografia, Marketing, etc."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="volunteer-motivation">Motiva√ß√£o:</label>
                            <textarea id="volunteer-motivation" name="motivation" placeholder="Por que deseja ser volunt√°rio?"></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Cadastrar Volunt√°rio</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelVolunteerForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Volunt√°rios</h3>
                    <table class="data-table" id="volunteers-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Disponibilidade</th>
                                <th>Status</th>
                                <th>Pontos</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="volunteers-table-body">
                            <!-- Volunteers will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Agendamento de Visitas -->
            <section id="visits-section" class="admin-section">
                <h2 class="section-title">Agendamento de Visitas</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Agendar Nova Visita</h3>
                        <button class="btn btn-primary" onclick="toggleVisitForm()">+ Nova Visita</button>
                    </div>
                    
                    <form id="visit-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-visitor-name">Nome do Visitante:</label>
                                <input type="text" id="visit-visitor-name" name="visitorName" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-visitor-email">Email:</label>
                                <input type="email" id="visit-visitor-email" name="visitorEmail" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-visitor-phone">Telefone:</label>
                                <input type="text" id="visit-visitor-phone" name="visitorPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-pet">Pet de Interesse:</label>
                                <select id="visit-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-date">Data da Visita:</label>
                                <input type="datetime-local" id="visit-date" name="dateScheduled" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-type">Tipo de Visita:</label>
                                <select id="visit-type" name="type" required>
                                    <option value="Conhecer o pet">Conhecer o pet</option>
                                    <option value="Segunda visita">Segunda visita</option>
                                    <option value="Entrega">Entrega</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="visit-notes">Observa√ß√µes:</label>
                            <textarea id="visit-notes" name="notes" placeholder="Observa√ß√µes sobre a visita..."></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Agendar Visita</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelVisitForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Visitas Agendadas</h3>
                    <table class="data-table" id="visits-table">
                        <thead>
                            <tr>
                                <th>Visitante</th>
                                <th>Pet</th>
                                <th>Data/Hora</th>
                                <th>Tipo</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="visits-table-body">
                            <!-- Visits will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Processo de Ado√ß√£o -->
            <section id="adoptions-section" class="admin-section">
                <h2 class="section-title">Processo de Ado√ß√£o</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Iniciar Processo de Ado√ß√£o</h3>
                        <button class="btn btn-primary" onclick="toggleAdoptionForm()">+ Nova Ado√ß√£o</button>
                    </div>
                    
                    <form id="adoption-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-adopter-name">Nome do Adotante:</label>
                                <input type="text" id="adoption-adopter-name" name="adopterName" required>
                            </div>
                            <div class="form-group">
                                <label for="adoption-adopter-email">Email:</label>
                                <input type="email" id="adoption-adopter-email" name="adopterEmail" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-adopter-phone">Telefone:</label>
                                <input type="text" id="adoption-adopter-phone" name="adopterPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="adoption-pet">Pet:</label>
                                <select id="adoption-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="adoption-address">Endere√ßo Completo:</label>
                            <textarea id="adoption-address" name="address" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-housing">Tipo de Moradia:</label>
                                <select id="adoption-housing" name="housingType" required>
                                    <option value="">Selecione...</option>
                                    <option value="Casa com quintal">Casa com quintal</option>
                                    <option value="Casa sem quintal">Casa sem quintal</option>
                                    <option value="Apartamento">Apartamento</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="adoption-experience">Experi√™ncia com Pets:</label>
                                <select id="adoption-experience" name="experience" required>
                                    <option value="">Selecione...</option>
                                    <option value="Primeira vez">Primeira vez</option>
                                    <option value="Pouca experi√™ncia">Pouca experi√™ncia</option>
                                    <option value="Experi√™ncia moderada">Experi√™ncia moderada</option>
                                    <option value="Muita experi√™ncia">Muita experi√™ncia</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="adoption-motivation">Motiva√ß√£o para Ado√ß√£o:</label>
                            <textarea id="adoption-motivation" name="motivation" required></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Iniciar Processo</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelAdoptionForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Processos de Ado√ß√£o</h3>
                    <table class="data-table" id="adoptions-table">
                        <thead>
                            <tr>
                                <th>Adotante</th>
                                <th>Pet</th>
                                <th>Data In√≠cio</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="adoptions-table-body">
                            <!-- Adoptions will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sistema de Padrinhos -->
            <section id="sponsors-section" class="admin-section">
                <h2 class="section-title">Sistema de Padrinhos/Madrinhas</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Cadastrar Padrinho/Madrinha</h3>
                        <button class="btn btn-primary" onclick="toggleSponsorForm()">+ Novo Padrinho</button>
                    </div>
                    
                    <form id="sponsor-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-name">Nome Completo:</label>
                                <input type="text" id="sponsor-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-email">Email:</label>
                                <input type="email" id="sponsor-email" name="email" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-phone">Telefone:</label>
                                <input type="text" id="sponsor-phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-pet">Pet Apadrinhado:</label>
                                <select id="sponsor-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-amount">Valor Mensal (R$):</label>
                                <input type="number" id="sponsor-amount" name="monthlyAmount" min="10" step="5" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-payment">Forma de Pagamento:</label>
                                <select id="sponsor-payment" name="paymentMethod" required>
                                    <option value="">Selecione...</option>
                                    <option value="PIX">PIX</option>
                                    <option value="Transfer√™ncia">Transfer√™ncia</option>
                                    <option value="Dinheiro">Dinheiro</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Cadastrar Padrinho</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelSponsorForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Padrinhos/Madrinhas</h3>
                    <table class="data-table" id="sponsors-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Pet Apadrinhado</th>
                                <th>Valor Mensal</th>
                                <th>Total Doado</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="sponsors-table-body">
                            <!-- Sponsors will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Gest√£o Veterin√°ria -->
            <section id="medical-section" class="admin-section">
                <h2 class="section-title">Gest√£o Veterin√°ria</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Adicionar Registro M√©dico</h3>
                        <button class="btn btn-primary" onclick="toggleMedicalForm()">+ Novo Registro</button>
                    </div>
                    
                    <form id="medical-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-pet">Pet:</label>
                                <select id="medical-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="medical-type">Tipo de Procedimento:</label>
                                <select id="medical-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Consulta">Consulta</option>
                                    <option value="Vacina√ß√£o">Vacina√ß√£o</option>
                                    <option value="Castra√ß√£o">Castra√ß√£o</option>
                                    <option value="Cirurgia">Cirurgia</option>
                                    <option value="Exame">Exame</option>
                                    <option value="Medica√ß√£o">Medica√ß√£o</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-date">Data:</label>
                                <input type="date" id="medical-date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="medical-vet">Veterin√°rio:</label>
                                <input type="text" id="medical-vet" name="veterinarian" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="medical-description">Descri√ß√£o/Observa√ß√µes:</label>
                            <textarea id="medical-description" name="description" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-cost">Custo (R$):</label>
                                <input type="number" id="medical-cost" name="cost" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="medical-next">Pr√≥ximo Procedimento:</label>
                                <input type="date" id="medical-next" name="nextAppointment">
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Salvar Registro</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelMedicalForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Hist√≥rico M√©dico por Pet</h3>
                    <div class="form-group">
                        <label for="medical-filter-pet">Filtrar por Pet:</label>
                        <select id="medical-filter-pet" onchange="filterMedicalRecords()">
                            <option value="">Todos os pets</option>
                            <!-- Options will be loaded dynamically -->
                        </select>
                    </div>
                    <div id="medical-records-list">
                        <!-- Medical records will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Gerenciamento de Eventos -->
            <section id="events-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Eventos</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Criar Novo Evento</h3>
                        <button class="btn btn-primary" onclick="toggleEventForm()">+ Novo Evento</button>
                    </div>
                    
                    <form id="event-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-name">Nome do Evento:</label>
                                <input type="text" id="event-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="event-type">Tipo:</label>
                                <select id="event-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Feira de Ado√ß√£o">Feira de Ado√ß√£o</option>
                                    <option value="Campanha de Vacina√ß√£o">Campanha de Vacina√ß√£o</option>
                                    <option value="Arrecada√ß√£o">Arrecada√ß√£o</option>
                                    <option value="Palestra">Palestra</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-date">Data:</label>
                                <input type="date" id="event-date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="event-time">Hor√°rio:</label>
                                <input type="time" id="event-time" name="time" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="event-location">Local:</label>
                            <input type="text" id="event-location" name="location" required>
                        </div>
                        <div class="form-group">
                            <label for="event-description">Descri√ß√£o:</label>
                            <textarea id="event-description" name="description" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-capacity">Capacidade (pessoas):</label>
                                <input type="number" id="event-capacity" name="capacity" min="1">
                            </div>
                            <div class="form-group">
                                <label for="event-registration">Requer Inscri√ß√£o:</label>
                                <select id="event-registration" name="requiresRegistration">
                                    <option value="false">N√£o</option>
                                    <option value="true">Sim</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Criar Evento</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelEventForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Eventos</h3>
                    <table class="data-table" id="events-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>Data</th>
                                <th>Local</th>
                                <th>Participantes</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="events-table-body">
                            <!-- Events will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sistema de Doa√ß√µes -->
            <section id="donations-section" class="admin-section">
                <h2 class="section-title">Sistema de Doa√ß√µes</h2>
                
                <div class="admin-form">
                    <h3>Registrar Doa√ß√£o</h3>
                    <form id="donation-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="donation-donor-name">Nome do Doador:</label>
                                <input type="text" id="donation-donor-name" name="donorName" required>
                            </div>
                            <div class="form-group">
                                <label for="donation-donor-email">Email:</label>
                                <input type="email" id="donation-donor-email" name="donorEmail">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="donation-amount">Valor (R$):</label>
                                <input type="number" id="donation-amount" name="amount" min="1" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="donation-type">Tipo:</label>
                                <select id="donation-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Dinheiro">Dinheiro</option>
                                    <option value="PIX">PIX</option>
                                    <option value="Transfer√™ncia">Transfer√™ncia</option>
                                    <option value="Ra√ß√£o">Ra√ß√£o</option>
                                    <option value="Medicamentos">Medicamentos</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="donation-purpose">Finalidade:</label>
                            <select id="donation-purpose" name="purpose">
                                <option value="Geral">Geral</option>
                                <option value="Veterin√°rio">Veterin√°rio</option>
                                <option value="Ra√ß√£o">Ra√ß√£o</option>
                                <option value="Medicamentos">Medicamentos</option>
                                <option value="Castra√ß√£o">Castra√ß√£o</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="donation-notes">Observa√ß√µes:</label>
                            <textarea id="donation-notes" name="notes"></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Registrar Doa√ß√£o</button>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Hist√≥rico de Doa√ß√µes</h3>
                    <div class="donation-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="total-donations">R$ 0,00</div>
                            <div class="stat-label">Total Arrecadado</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="monthly-donations">R$ 0,00</div>
                            <div class="stat-label">Este M√™s</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="donors-count">0</div>
                            <div class="stat-label">Doadores</div>
                        </div>
                    </div>
                    <table class="data-table" id="donations-table">
                        <thead>
                            <tr>
                                <th>Doador</th>
                                <th>Valor</th>
                                <th>Tipo</th>
                                <th>Finalidade</th>
                                <th>Data</th>
                            </tr>
                        </thead>
                        <tbody id="donations-table-body">
                            <!-- Donations will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Estat√≠sticas -->
            <section id="stats-section" class="admin-section">
                <h2 class="section-title">Gerenciar Estat√≠sticas</h2>
                
                <div class="admin-form">
                    <h3>Atualizar N√∫meros</h3>
                    <form id="stats-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="animals-rescued">Animais Resgatados:</label>
                                <input type="number" id="animals-rescued" name="animalsRescued" required>
                            </div>
                            <div class="form-group">
                                <label for="adoptions-completed">Ado√ß√µes Realizadas:</label>
                                <input type="number" id="adoptions-completed" name="adoptionsCompleted" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteers-active">Volunt√°rios Ativos:</label>
                                <input type="number" id="volunteers-active" name="volunteersActive" required>
                            </div>
                            <div class="form-group">
                                <label for="partners-count">Parceiros:</label>
                                <input type="number" id="partners-count" name="partnersCount" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Atualizar Estat√≠sticas</button>
                    </form>
                </div>
            </section>

            <!-- Conte√∫do -->
            <section id="content-section" class="admin-section">
                <h2 class="section-title">Gerenciar Conte√∫do</h2>
                
                <div class="admin-form">
                    <h3>Conte√∫do da P√°gina Principal</h3>
                    <form id="content-form">
                        <div class="form-group">
                            <label for="hero-title">T√≠tulo Principal:</label>
                            <input type="text" id="hero-title" name="heroTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="hero-subtitle">Subt√≠tulo:</label>
                            <textarea id="hero-subtitle" name="heroSubtitle" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="about-text">Texto Sobre N√≥s:</label>
                            <textarea id="about-text" name="aboutText" required></textarea>
                        </div>
                        <h4>Informa√ß√µes de Contato</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contact-phone">Telefone:</label>
                                <input type="text" id="contact-phone" name="contactPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="contact-email">Email:</label>
                                <input type="email" id="contact-email" name="contactEmail" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-address">Endere√ßo:</label>
                            <input type="text" id="contact-address" name="contactAddress" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Conte√∫do</button>
                    </form>
                </div>
            </section>

            <!-- Mensagens -->
            <section id="messages-section" class="admin-section">
                <h2 class="section-title">Mensagens de Contato</h2>
                
                <div class="admin-form">
                    <div id="messages-list">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Backup -->
            <section id="backup-section" class="admin-section">
                <h2 class="section-title">Backup e Restaura√ß√£o</h2>
                
                <div class="admin-form">
                    <h3>Backup dos Dados</h3>
                    <p>Fa√ßa backup de todos os dados do sistema (pets, estat√≠sticas, conte√∫do e mensagens).</p>
                    <button class="btn btn-primary" onclick="exportData()">Baixar Backup</button>
                </div>

                <div class="admin-form">
                    <h3>Restaurar Dados</h3>
                    <p>Restaure dados de um arquivo de backup anterior.</p>
                    <div class="form-group">
                        <label for="backup-file">Arquivo de Backup:</label>
                        <input type="file" id="backup-file" accept=".json">
                    </div>
                    <button class="btn btn-danger" onclick="importData()">Restaurar Backup</button>
                </div>

                <div class="admin-form">
                    <h3>Resetar Sistema</h3>
                    <p style="color: #dc3545; font-weight: bold;">‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o ir√° apagar todos os dados e restaurar os dados padr√£o!</p>
                    <button class="btn btn-danger" onclick="resetSystem()">Resetar para Padr√£o</button>
                </div>
            </section>

            <!-- Hall da Fama dos Volunt√°rios -->
            <section id="public-volunteers-section" class="admin-section">
                <h2 class="section-title">üèÜ Hall da Fama dos Volunt√°rios</h2>
                
                <!-- Estat√≠sticas Gerais -->
                <div class="admin-form">
                    <h3>üìä Estat√≠sticas P√∫blicas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="total-volunteers-stat">Total de Volunt√°rios Ativos:</label>
                            <input type="number" id="total-volunteers-stat" value="42">
                        </div>
                        <div class="form-group">
                            <label for="total-hours-stat">Total de Horas Dedicadas:</label>
                            <input type="number" id="total-hours-stat" value="1250">
                        </div>
                        <div class="form-group">
                            <label for="animals-helped-stat">Animais Ajudados:</label>
                            <input type="number" id="animals-helped-stat" value="156">
                        </div>
                        <div class="form-group">
                            <label for="adoptions-facilitated-stat">Ado√ß√µes Facilitadas:</label>
                            <input type="number" id="adoptions-facilitated-stat" value="89">
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="saveVolunteerStats()">Salvar Estat√≠sticas</button>
                </div>

                <!-- Gest√£o de Volunt√°rios em Destaque -->
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>üåü Volunt√°rios em Destaque</h3>
                        <button class="btn btn-primary" onclick="toggleFeaturedVolunteerForm()">+ Destacar Volunt√°rio</button>
                    </div>

                    <!-- Formul√°rio para Adicionar Volunt√°rio em Destaque -->
                    <form id="featured-volunteer-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-select">Selecionar Volunt√°rio:</label>
                                <select id="volunteer-select" required>
                                    <option value="">Escolha um volunt√°rio...</option>
                                    <!-- Ser√° preenchido dinamicamente -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="volunteer-avatar">Avatar (Emoji):</label>
                                <input type="text" id="volunteer-avatar" placeholder="üë©‚Äç‚öïÔ∏è" maxlength="2">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-role-display">Fun√ß√£o para Exibi√ß√£o:</label>
                                <input type="text" id="volunteer-role-display" placeholder="Coordenadora de Resgates">
                            </div>
                            <div class="form-group">
                                <label for="volunteer-badges">Badges (separadas por v√≠rgula):</label>
                                <input type="text" id="volunteer-badges" placeholder="Veterin√°ria, L√≠der, Experiente">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-rescues">N√∫mero de Resgates:</label>
                                <input type="number" id="volunteer-rescues" min="0">
                            </div>
                            <div class="form-group">
                                <label for="volunteer-hours">Horas Dedicadas:</label>
                                <input type="number" id="volunteer-hours" min="0">
                            </div>
                            <div class="form-group">
                                <label for="volunteer-adoptions">Ado√ß√µes Facilitadas:</label>
                                <input type="number" id="volunteer-adoptions" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="volunteer-public"> Exibir publicamente no site
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">Adicionar ao Hall da Fama</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelFeaturedVolunteer()">Cancelar</button>
                    </form>

                    <!-- Lista de Volunt√°rios em Destaque -->
                    <div id="featured-volunteers-list">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>
                </div>

                <!-- Gest√£o de Depoimentos -->
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>üí¨ Depoimentos</h3>
                        <button class="btn btn-primary" onclick="toggleTestimonialForm()">+ Novo Depoimento</button>
                    </div>

                    <!-- Formul√°rio para Adicionar Depoimento -->
                    <form id="testimonial-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="testimonial-author">Autor:</label>
                                <input type="text" id="testimonial-author" required>
                            </div>
                            <div class="form-group">
                                <label for="testimonial-role">Fun√ß√£o/Tempo:</label>
                                <input type="text" id="testimonial-role" placeholder="Volunt√°ria h√° 3 anos">
                            </div>
                            <div class="form-group">
                                <label for="testimonial-avatar">Avatar (Emoji):</label>
                                <input type="text" id="testimonial-avatar" placeholder="üë©‚Äç‚öïÔ∏è" maxlength="2">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="testimonial-quote">Depoimento:</label>
                            <textarea id="testimonial-quote" rows="4" required placeholder="Escreva o depoimento inspirador..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="testimonial-public"> Exibir publicamente no site
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">Salvar Depoimento</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelTestimonial()">Cancelar</button>
                    </form>

                    <!-- Lista de Depoimentos -->
                    <div id="testimonials-list">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- Transpar√™ncia Financeira -->
            <section id="public-transparency-section" class="admin-section">
                <h2 class="section-title">üìä Transpar√™ncia Financeira</h2>
                
                <!-- Resumo Financeiro -->
                <div class="admin-form">
                    <h3>üí∞ Resumo Financeiro Atual</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="total-income">Total Arrecadado (R$):</label>
                            <input type="number" id="total-income" step="0.01" value="15750.00">
                        </div>
                        <div class="form-group">
                            <label for="total-expenses">Total Investido (R$):</label>
                            <input type="number" id="total-expenses" step="0.01" value="12340.50">
                        </div>
                        <div class="form-group">
                            <label for="current-balance">Saldo Atual (R$):</label>
                            <input type="number" id="current-balance" step="0.01" value="8420.75">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="financial-summary-public" checked> Exibir resumo publicamente
                        </label>
                    </div>
                    <button class="btn btn-success" onclick="saveFinancialSummary()">Salvar Resumo</button>
                </div>

                <!-- Gest√£o de Transa√ß√µes -->
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>üí≥ Movimenta√ß√µes Financeiras</h3>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-success" onclick="loadSampleData()">üìä Carregar Dados de Exemplo</button>
                            <button class="btn btn-primary" onclick="toggleTransactionForm()">+ Nova Transa√ß√£o</button>
                        </div>
                    </div>

                    <!-- Formul√°rio para Adicionar Transa√ß√£o -->
                    <form id="transaction-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="transaction-type">Tipo:</label>
                                <select id="transaction-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="income">Receita</option>
                                    <option value="expense">Despesa</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transaction-category">Categoria:</label>
                                <select id="transaction-category" name="category" required>
                                    <option value="">Selecione...</option>
                                    <optgroup label="Receitas">
                                        <option value="donation">Doa√ß√£o</option>
                                        <option value="adoption">Taxa de Ado√ß√£o</option>
                                        <option value="event">Evento</option>
                                    </optgroup>
                                    <optgroup label="Despesas">
                                        <option value="veterinary">Veterin√°rio</option>
                                        <option value="food">Alimenta√ß√£o</option>
                                        <option value="supplies">Suprimentos</option>
                                        <option value="maintenance">Manuten√ß√£o</option>
                                        <option value="other">Outros</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transaction-amount">Valor (R$):</label>
                                <input type="number" id="transaction-amount" name="amount" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="transaction-date">Data:</label>
                                <input type="date" id="transaction-date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="transaction-description">Descri√ß√£o:</label>
                                <input type="text" id="transaction-description" name="description" required placeholder="Ex: Doa√ß√£o - Maria Silva">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="transaction-public" name="public"> Exibir publicamente no site
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">Salvar Transa√ß√£o</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelTransactionForm()">Cancelar</button>
                    </form>

                    <!-- Gr√°ficos Financeiros -->
                    <div class="charts-section">
                        <div class="charts-row">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h4>üìä Receita vs Despesas</h4>
                                    <select id="revenue-period" onchange="updateRevenueChart()">
                                        <option value="6">√öltimos 6 meses</option>
                                        <option value="12">√öltimo ano</option>
                                    </select>
                                </div>
                                <div class="chart-container">
                                    <canvas id="revenue-expenses-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h4>ü•ß Distribui√ß√£o de Gastos</h4>
                                    <select id="expenses-period" onchange="updateExpensesChart()">
                                        <option value="current">M√™s atual</option>
                                        <option value="last">√öltimo m√™s</option>
                                        <option value="year">Este ano</option>
                                    </select>
                                </div>
                                <div class="chart-container">
                                    <canvas id="expenses-distribution-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Transa√ß√µes -->
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Tipo</th>
                                    <th>Categoria</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Valor</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-table-body">
                                <!-- Ser√° preenchido dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Resumo de Gastos Veterin√°rios -->
                    <div id="veterinary-chart" class="vet-chart-container">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>
                </div>

                <!-- Gest√£o de Metas/Campanhas -->
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>üéØ Metas e Campanhas</h3>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-secondary" onclick="testPublicIntegration()" title="Testar integra√ß√£o com p√°gina p√∫blica">
                                üîó Testar Integra√ß√£o
                            </button>
                            <button class="btn btn-primary" onclick="toggleGoalForm()">+ Nova Meta</button>
                        </div>
                    </div>

                    <!-- Formul√°rio para Adicionar Meta -->
                    <form id="goal-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="goal-title">T√≠tulo da Campanha:</label>
                                <input type="text" id="goal-title" required placeholder="Ex: Campanha de Castra√ß√£o">
                            </div>
                            <div class="form-group">
                                <label for="goal-target">Meta (R$):</label>
                                <input type="number" id="goal-target" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="goal-current">Valor Atual (R$):</label>
                                <input type="number" id="goal-current" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="goal-description">Descri√ß√£o:</label>
                            <textarea id="goal-description" rows="3" placeholder="Descreva o objetivo da campanha..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="goal-public"> Exibir publicamente no site
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">Salvar Meta</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelGoal()">Cancelar</button>
                    </form>

                    <!-- Lista de Metas -->
                    <div id="goals-list">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- Campanhas P√∫blicas -->
            <section id="public-campaigns-section" class="admin-section">
                <h2 class="section-title">üéØ Campanhas P√∫blicas</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>üöÄ Campanhas Ativas</h3>
                        <button class="btn btn-primary" onclick="toggleCampaignForm()">+ Nova Campanha</button>
                    </div>

                    <!-- Formul√°rio para Adicionar Campanha -->
                    <form id="campaign-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="campaign-title">T√≠tulo:</label>
                                <input type="text" id="campaign-title" required>
                            </div>
                            <div class="form-group">
                                <label for="campaign-type">Tipo:</label>
                                <select id="campaign-type" required>
                                    <option value="">Selecione...</option>
                                    <option value="adoption">Ado√ß√£o</option>
                                    <option value="donation">Doa√ß√£o</option>
                                    <option value="volunteer">Voluntariado</option>
                                    <option value="event">Evento</option>
                                    <option value="medical">Tratamento</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="campaign-description">Descri√ß√£o:</label>
                            <textarea id="campaign-description" rows="4" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="campaign-start">Data de In√≠cio:</label>
                                <input type="date" id="campaign-start" required>
                            </div>
                            <div class="form-group">
                                <label for="campaign-end">Data de T√©rmino:</label>
                                <input type="date" id="campaign-end">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="campaign-active" checked> Campanha ativa
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">Salvar Campanha</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelCampaign()">Cancelar</button>
                    </form>

                    <!-- Lista de Campanhas -->
                    <div id="campaigns-list">
                        <!-- Ser√° preenchido dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- Configura√ß√µes de Visibilidade -->
            <section id="public-settings-section" class="admin-section">
                <h2 class="section-title">üëÅÔ∏è Configura√ß√µes de Visibilidade</h2>
                
                <!-- Controle Geral de Se√ß√µes -->
                <div class="admin-form">
                    <h3>üåê Se√ß√µes P√∫blicas do Site</h3>
                    <div class="visibility-controls">
                        <div class="visibility-item">
                            <label>
                                <input type="checkbox" id="show-volunteers-section" checked>
                                <span class="visibility-label">üèÜ Se√ß√£o "Hall da Fama dos Volunt√°rios"</span>
                            </label>
                            <p class="visibility-description">Exibe a p√°gina com volunt√°rios em destaque, estat√≠sticas e depoimentos</p>
                        </div>
                        
                        <div class="visibility-item">
                            <label>
                                <input type="checkbox" id="show-transparency-section" checked>
                                <span class="visibility-label">üìä Se√ß√£o "Transpar√™ncia Financeira"</span>
                            </label>
                            <p class="visibility-description">Exibe relat√≥rios financeiros, transa√ß√µes e metas p√∫blicas</p>
                        </div>
                        
                        <div class="visibility-item">
                            <label>
                                <input type="checkbox" id="show-campaigns-section" checked>
                                <span class="visibility-label">üéØ Campanhas Ativas</span>
                            </label>
                            <p class="visibility-description">Exibe campanhas em andamento na p√°gina inicial</p>
                        </div>
                    </div>
                </div>

                <!-- Controle Detalhado -->
                <div class="admin-form">
                    <h3>üîß Controles Detalhados</h3>
                    
                    <h4>Hall da Fama dos Volunt√°rios:</h4>
                    <div class="visibility-controls">
                        <label><input type="checkbox" id="show-volunteer-stats" checked> Estat√≠sticas gerais</label>
                        <label><input type="checkbox" id="show-featured-volunteers" checked> Volunt√°rios em destaque</label>
                        <label><input type="checkbox" id="show-testimonials" checked> Depoimentos</label>
                        <label><input type="checkbox" id="show-volunteer-cta" checked> Chamada para voluntariado</label>
                    </div>

                    <h4>Transpar√™ncia Financeira:</h4>
                    <div class="visibility-controls">
                        <label><input type="checkbox" id="show-financial-overview" checked> Resumo financeiro</label>
                        <label><input type="checkbox" id="show-transactions" checked> Movimenta√ß√µes recentes</label>
                        <label><input type="checkbox" id="show-goals" checked> Metas e campanhas</label>
                        <label><input type="checkbox" id="show-reports" checked> Relat√≥rios para download</label>
                    </div>
                </div>

                <!-- Configura√ß√µes Avan√ßadas -->
                <div class="admin-form">
                    <h3>‚öôÔ∏è Configura√ß√µes Avan√ßadas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="update-frequency">Frequ√™ncia de Atualiza√ß√£o (segundos):</label>
                            <input type="number" id="update-frequency" value="30" min="10" max="300">
                        </div>
                        <div class="form-group">
                            <label for="max-featured-volunteers">M√°ximo de Volunt√°rios em Destaque:</label>
                            <input type="number" id="max-featured-volunteers" value="6" min="1" max="12">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="max-testimonials">M√°ximo de Depoimentos Exibidos:</label>
                            <input type="number" id="max-testimonials" value="5" min="1" max="10">
                        </div>
                        <div class="form-group">
                            <label for="max-transactions">M√°ximo de Transa√ß√µes Recentes:</label>
                            <input type="number" id="max-transactions" value="10" min="5" max="20">
                        </div>
                    </div>
                </div>

                <button class="btn btn-success" onclick="saveVisibilitySettings()">Salvar Configura√ß√µes</button>
            </section>
        </main>
    </div>

    <!-- Modal para Editar Pet -->
    <div id="edit-pet-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Editar Pet</h3>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <form id="edit-pet-form">
                <input type="hidden" id="edit-pet-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-pet-name">Nome:</label>
                        <input type="text" id="edit-pet-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-pet-type">Tipo:</label>
                        <select id="edit-pet-type" name="type" required>
                            <option value="C√£o">C√£o</option>
                            <option value="Gata">Gata</option>
                            <option value="Gato">Gato</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-pet-age">Idade:</label>
                        <input type="text" id="edit-pet-age" name="age" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-pet-emoji">Emoji:</label>
                        <input type="text" id="edit-pet-emoji" name="emoji" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-pet-description">Descri√ß√£o:</label>
                    <textarea id="edit-pet-description" name="description" required></textarea>
                </div>
                <div class="form-group">
                    <label>Foto do Pet:</label>
                    <div class="photo-upload-container" id="edit-pet-photo-upload" onclick="document.getElementById('edit-pet-photo-input').click()">
                        <input type="file" id="edit-pet-photo-input" class="photo-upload-input" accept="image/*" onchange="handlePhotoUpload(event, 'edit-pet')">
                        <div class="photo-upload-icon">üì∑</div>
                        <div class="photo-upload-text" id="edit-pet-photo-text">
                            Clique aqui ou arraste uma foto do pet<br>
                            <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
                        </div>
                        <div id="edit-pet-photo-preview-container" style="display: none;">
                            <img id="edit-pet-photo-preview" class="photo-preview" alt="Preview da foto">
                            <button type="button" class="remove-photo-btn" onclick="removePhoto('edit-pet')">Remover Foto</button>
                        </div>
                    </div>
                    <div id="edit-pet-photo-error" class="file-size-warning" style="display: none;"></div>
                </div>
                <div class="form-group">
                    <label>Tags:</label>
                    <div class="tags-input" id="edit-pet-tags">
                        <input type="text" class="tag-input" placeholder="Digite uma tag e pressione Enter">
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-pet-status">Status:</label>
                    <select id="edit-pet-status" name="status" required>
                        <option value="Dispon√≠vel">Dispon√≠vel</option>
                        <option value="Em Processo">Em Processo</option>
                        <option value="Adotado">Adotado</option>
                    </select>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn btn-success">Salvar Altera√ß√µes</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Vari√°veis globais
        let currentEditingPet = null;
        let petTags = [];
        let editPetTags = [];
        let currentPetPhoto = null;
        let currentEditPetPhoto = null;

        // Autentica√ß√£o simples
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: '123'
        };

        // Fun√ß√£o de login autom√°tico (GLOBAL - dispon√≠vel antes do DOMContentLoaded)
        function autoLogin() {
            console.log('üöÄ Fazendo login autom√°tico...');
            document.getElementById('username').value = 'admin';
            document.getElementById('password').value = '123';
            
            sessionStorage.setItem('ligaDoBem_admin_logged', 'true');
            showAdminInterface();
        }

        // Sistema de Dados Administrativos
        const adminData = {
            // Dados dos pets
            pets: JSON.parse(localStorage.getItem('ligaDoBem_pets') || '[]'),
            
            // Dados dos volunt√°rios
            volunteers: JSON.parse(localStorage.getItem('ligaDoBem_volunteers') || '[]'),
            
            // Dados das ado√ß√µes
            adoptions: JSON.parse(localStorage.getItem('ligaDoBem_adoptions') || '[]'),
            
            // Dados financeiros/transa√ß√µes
            transactions: JSON.parse(localStorage.getItem('ligaDoBem_transactions') || '[]'),
            
            // M√©todos para pets
            getPets() {
                return this.pets;
            },
            
            addPet(petData) {
                const newPet = {
                    id: Date.now(),
                    ...petData,
                    medicalHistory: [],
                    createdAt: new Date().toISOString()
                };
                this.pets.push(newPet);
                this.savePets();
                return newPet;
            },
            
            updatePet(id, petData) {
                const index = this.pets.findIndex(p => p.id === id);
                if (index !== -1) {
                    this.pets[index] = { ...this.pets[index], ...petData };
                    this.savePets();
                    return this.pets[index];
                }
                return null;
            },
            
            deletePet(id) {
                this.pets = this.pets.filter(p => p.id !== id);
                this.savePets();
            },
            
            savePets() {
                localStorage.setItem('ligaDoBem_pets', JSON.stringify(this.pets));
            },
            
            // M√©todos para registros m√©dicos
            addMedicalRecord(petId, recordData) {
                const pet = this.pets.find(p => p.id === petId);
                if (pet) {
                    if (!pet.medicalHistory) pet.medicalHistory = [];
                    const newRecord = {
                        id: Date.now(),
                        ...recordData,
                        createdAt: new Date().toISOString()
                    };
                    pet.medicalHistory.push(newRecord);
                    this.savePets();
                    return newRecord;
                }
                return null;
            },
            
            // M√©todos para volunt√°rios
            getVolunteers() {
                return this.volunteers;
            },
            
            addVolunteer(volunteerData) {
                const newVolunteer = {
                    id: Date.now(),
                    ...volunteerData,
                    createdAt: new Date().toISOString()
                };
                this.volunteers.push(newVolunteer);
                this.saveVolunteers();
                return newVolunteer;
            },
            
            saveVolunteers() {
                localStorage.setItem('ligaDoBem_volunteers', JSON.stringify(this.volunteers));
            },
            
            // M√©todos para ado√ß√µes
            getAdoptions() {
                return this.adoptions;
            },
            
            addAdoption(adoptionData) {
                const newAdoption = {
                    id: Date.now(),
                    ...adoptionData,
                    createdAt: new Date().toISOString()
                };
                this.adoptions.push(newAdoption);
                this.saveAdoptions();
                return newAdoption;
            },
            
            saveAdoptions() {
                localStorage.setItem('ligaDoBem_adoptions', JSON.stringify(this.adoptions));
            },
            
            // M√©todos para transa√ß√µes financeiras
            getTransactions() {
                return this.transactions;
            },
            
            addTransaction(transactionData) {
                const newTransaction = {
                    id: Date.now(),
                    ...transactionData,
                    createdAt: new Date().toISOString()
                };
                this.transactions.push(newTransaction);
                this.saveTransactions();
                return newTransaction;
            },
            
            updateTransaction(id, transactionData) {
                const index = this.transactions.findIndex(t => t.id === id);
                if (index !== -1) {
                    this.transactions[index] = { ...this.transactions[index], ...transactionData };
                    this.saveTransactions();
                    return this.transactions[index];
                }
                return null;
            },
            
            deleteTransaction(id) {
                this.transactions = this.transactions.filter(t => t.id !== id);
                this.saveTransactions();
            },
            
            saveTransactions() {
                localStorage.setItem('ligaDoBem_transactions', JSON.stringify(this.transactions));
            },
            
            // M√©todos para estat√≠sticas financeiras
            getFinancialSummary() {
                const income = this.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                const expenses = this.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                return {
                    totalIncome: income,
                    totalExpenses: expenses,
                    currentBalance: income - expenses
                };
            },
            
            getVeterinaryExpenses() {
                return this.transactions
                    .filter(t => t.type === 'expense' && t.category === 'veterinary')
                    .sort((a, b) => new Date(b.date) - new Date(a.date));
            }
        };

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            setupEventListeners();
            setupDragAndDrop('pet-photo-upload', 'pet');
            setupDragAndDrop('edit-pet-photo-upload', 'edit-pet');
            
            // Limpar dados existentes e criar novos dados de exemplo
            localStorage.removeItem('ligaDoBem_pets');
            localStorage.removeItem('ligaDoBem_transactions');
            localStorage.removeItem('ligaDoBem_volunteers');
            localStorage.removeItem('ligaDoBem_visits');
            localStorage.removeItem('ligaDoBem_adoptions');
            localStorage.removeItem('ligaDoBem_sponsors');
            localStorage.removeItem('ligaDoBem_events');
            localStorage.removeItem('ligaDoBem_donations');
            
            // Recarregar dados vazios
            adminData.pets = [];
            adminData.transactions = [];
            adminData.volunteers = [];
            adminData.visits = [];
            adminData.adoptions = [];
            adminData.sponsors = [];
            adminData.events = [];
            adminData.donations = [];
            
            // Criar dados de exemplo
            createSampleData();
            
            console.log('‚úÖ Dados de exemplo criados!');
            
            // Fun√ß√£o de teste para demonstrar a integra√ß√£o
            window.testVeterinaryIntegration = function() {
                console.log('üß™ Testando integra√ß√£o veterin√°ria...');
                
                // Simular adi√ß√£o de um registro m√©dico
                const pets = adminData.getPets();
                if (pets.length > 0) {
                    const testPet = pets[0];
                    const testRecord = {
                        type: 'Cirurgia',
                        date: new Date().toISOString().split('T')[0],
                        veterinarian: 'Dr. Teste Silva',
                        description: 'Cirurgia de emerg√™ncia - teste de integra√ß√£o',
                        cost: 350.00
                    };
                    
                    // Adicionar registro m√©dico (que automaticamente criar√° a transa√ß√£o)
                    adminData.addMedicalRecord(testPet.id, testRecord);
                    
                    console.log('‚úÖ Registro m√©dico adicionado');
                    console.log('‚úÖ Transa√ß√£o financeira criada automaticamente');
                    
                    // Recarregar as listas
                    if (document.getElementById('medical-records-list')) {
                        loadMedicalRecords();
                    }
                    if (document.getElementById('transactions-table-body')) {
                        loadTransactions();
                    }
                    
                    alert('Teste conclu√≠do! Verifique:\n1. Se√ß√£o M√©dica - novo registro\n2. Transpar√™ncia - nova transa√ß√£o\n3. Site principal - dados atualizados');
                } else {
                    alert('Nenhum pet encontrado para teste. Crie um pet primeiro.');
                }
            };
            
            console.log('üîß Sistema de integra√ß√£o veterin√°ria carregado!');
            console.log('üí° Para testar, execute: testVeterinaryIntegration()');
        });

        // Fun√ß√£o para criar dados de exemplo
        function createSampleData() {
            console.log('üîß Criando dados de exemplo...');
            
            // Criar pets de exemplo
            const samplePets = [
                {
                    name: 'Buddy',
                    type: 'C√£o',
                    age: '2 anos',
                    description: 'C√£o muito carinhoso e brincalh√£o',
                    emoji: 'üêï',
                    status: 'Dispon√≠vel'
                },
                {
                    name: 'Luna',
                    type: 'Gata',
                    age: '1 ano',
                    description: 'Gata d√≥cil e independente',
                    emoji: 'üê±',
                    status: 'Dispon√≠vel'
                },
                {
                    name: 'Max',
                    type: 'C√£o',
                    age: '3 anos',
                    description: 'C√£o protetor e leal',
                    emoji: 'üêï',
                    status: 'Dispon√≠vel'
                }
            ];
            
            // Adicionar pets
            console.log('üìù Adicionando pets de exemplo...');
            samplePets.forEach(pet => {
                console.log('Adicionando pet:', pet.name);
                adminData.addPet(pet);
            });
            console.log('‚úÖ Pets adicionados:', adminData.getPets().length);
            
            // Criar transa√ß√µes de exemplo (incluindo gastos veterin√°rios)
            const sampleTransactions = [
                // Receitas
                {
                    type: 'income',
                    category: 'donation',
                    description: 'Doa√ß√£o - Maria Silva',
                    amount: 150.00,
                    date: '2024-01-15'
                },
                {
                    type: 'income',
                    category: 'adoption',
                    description: 'Taxa de ado√ß√£o - Buddy',
                    amount: 80.00,
                    date: '2024-01-20'
                },
                {
                    type: 'income',
                    category: 'donation',
                    description: 'Doa√ß√£o - Jo√£o Santos',
                    amount: 200.00,
                    date: '2024-01-25'
                },
                
                // Gastos veterin√°rios
                {
                    type: 'expense',
                    category: 'veterinary',
                    description: 'Castra√ß√£o - Luna',
                    amount: 180.00,
                    date: '2024-01-10',
                    veterinarian: 'Dr. Carlos Mendes',
                    petId: null // Ser√° atualizado depois
                },
                {
                    type: 'expense',
                    category: 'veterinary',
                    description: 'Vacina√ß√£o - Buddy',
                    amount: 85.00,
                    date: '2024-01-12',
                    veterinarian: 'Dra. Ana Paula',
                    petId: null
                },
                {
                    type: 'expense',
                    category: 'veterinary',
                    description: 'Consulta - Max',
                    amount: 120.00,
                    date: '2024-01-18',
                    veterinarian: 'Dr. Roberto Silva',
                    petId: null
                },
                {
                    type: 'expense',
                    category: 'veterinary',
                    description: 'Exame de sangue - Luna',
                    amount: 95.00,
                    date: '2024-01-22',
                    veterinarian: 'Dr. Carlos Mendes',
                    petId: null
                },
                {
                    type: 'expense',
                    category: 'veterinary',
                    description: 'Medica√ß√£o - Buddy',
                    amount: 45.00,
                    date: '2024-01-28',
                    veterinarian: 'Dra. Ana Paula',
                    petId: null
                },
                
                // Outros gastos
                {
                    type: 'expense',
                    category: 'food',
                    description: 'Ra√ß√£o Premium - 20kg',
                    amount: 120.00,
                    date: '2024-01-05'
                },
                {
                    type: 'expense',
                    category: 'supplies',
                    description: 'Coleiras e guias',
                    amount: 65.00,
                    date: '2024-01-08'
                },
                {
                    type: 'expense',
                    category: 'maintenance',
                    description: 'Limpeza do canil',
                    amount: 80.00,
                    date: '2024-01-30'
                }
            ];
            
            // Adicionar transa√ß√µes
            console.log('üí∞ Adicionando transa√ß√µes de exemplo...');
            sampleTransactions.forEach(transaction => {
                console.log('Adicionando transa√ß√£o:', transaction.description);
                adminData.addTransaction(transaction);
            });
            console.log('‚úÖ Transa√ß√µes adicionadas:', adminData.getTransactions().length);
            
            // Criar registros m√©dicos de exemplo
            const pets = adminData.getPets();
            if (pets.length > 0) {
                // Registros para Luna
                const luna = pets.find(p => p.name === 'Luna');
                if (luna) {
                    adminData.addMedicalRecord(luna.id, {
                        type: 'Castra√ß√£o',
                        date: '2024-01-10',
                        veterinarian: 'Dr. Carlos Mendes',
                        description: 'Castra√ß√£o realizada com sucesso. Animal se recuperou bem.',
                        cost: 180.00,
                        nextAppointment: '2024-02-10'
                    });
                    
                    adminData.addMedicalRecord(luna.id, {
                        type: 'Exame',
                        date: '2024-01-22',
                        veterinarian: 'Dr. Carlos Mendes',
                        description: 'Exame de sangue para check-up p√≥s-cir√∫rgico. Resultados normais.',
                        cost: 95.00
                    });
                }
                
                // Registros para Buddy
                const buddy = pets.find(p => p.name === 'Buddy');
                if (buddy) {
                    adminData.addMedicalRecord(buddy.id, {
                        type: 'Vacina√ß√£o',
                        date: '2024-01-12',
                        veterinarian: 'Dra. Ana Paula',
                        description: 'Aplica√ß√£o de vacina V10. Animal reagiu bem.',
                        cost: 85.00,
                        nextAppointment: '2024-02-12'
                    });
                    
                    adminData.addMedicalRecord(buddy.id, {
                        type: 'Medica√ß√£o',
                        date: '2024-01-28',
                        veterinarian: 'Dra. Ana Paula',
                        description: 'Verm√≠fugo e vitaminas. Tratamento preventivo.',
                        cost: 45.00
                    });
                }
                
                // Registros para Max
                const max = pets.find(p => p.name === 'Max');
                if (max) {
                    adminData.addMedicalRecord(max.id, {
                        type: 'Consulta',
                        date: '2024-01-18',
                        veterinarian: 'Dr. Roberto Silva',
                        description: 'Consulta de rotina. Animal saud√°vel, apenas orienta√ß√µes de cuidados.',
                        cost: 120.00,
                        nextAppointment: '2024-04-18'
                    });
                }
            }
        }

        function checkAuth() {
            const isLoggedIn = sessionStorage.getItem('ligaDoBem_admin_logged');
            if (isLoggedIn) {
                showAdminInterface();
            } else {
                showLoginScreen();
            }
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Pet form
            document.getElementById('pet-form').addEventListener('submit', handlePetSubmit);
            document.getElementById('edit-pet-form').addEventListener('submit', handleEditPetSubmit);
            
            // Volunteer form
            document.getElementById('volunteer-form').addEventListener('submit', handleVolunteerSubmit);
            
            // Visit form
            document.getElementById('visit-form').addEventListener('submit', handleVisitSubmit);
            
            // Adoption form
            document.getElementById('adoption-form').addEventListener('submit', handleAdoptionSubmit);
            
            // Sponsor form
            document.getElementById('sponsor-form').addEventListener('submit', handleSponsorSubmit);
            
            // Medical form
            document.getElementById('medical-form').addEventListener('submit', handleMedicalSubmit);
            
            // Transaction form
            const transactionForm = document.getElementById('transaction-form');
            if (transactionForm) {
                transactionForm.addEventListener('submit', handleTransactionSubmit);
            }
            
            // Goal form
            const goalForm = document.getElementById('goal-form');
            if (goalForm) {
                goalForm.addEventListener('submit', handleGoalSubmit);
            }
            
            // Event form
            document.getElementById('event-form').addEventListener('submit', handleEventSubmit);
            
            // Donation form
            document.getElementById('donation-form').addEventListener('submit', handleDonationSubmit);
            
            // Stats form
            document.getElementById('stats-form').addEventListener('submit', handleStatsSubmit);
            
            // Content form
            document.getElementById('content-form').addEventListener('submit', handleContentSubmit);
            
            // Tags input
            setupTagsInput('pet-tags', petTags);
            setupTagsInput('edit-pet-tags', editPetTags);
        }

        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            console.log('Tentativa de login:', { username, password });
            console.log('Credenciais esperadas:', ADMIN_CREDENTIALS);
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                console.log('‚úÖ Login bem-sucedido!');
                sessionStorage.setItem('ligaDoBem_admin_logged', 'true');
                showAdminInterface();
            } else {
                console.log('‚ùå Login falhou!');
                document.getElementById('login-error').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('login-error').style.display = 'none';
                }, 3000);
            }
        }

        function logout() {
            sessionStorage.removeItem('ligaDoBem_admin_logged');
            showLoginScreen();
        }

        function showLoginScreen() {
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('admin-interface').style.display = 'none';
        }

        function showAdminInterface() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-interface').style.display = 'block';
            loadDashboard();
        }

        function showSection(sectionName) {
            // Fechar sidebar se estiver aberto
            closeSidebar();
            
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.add('active');
            
            // Add active class to clicked button
            if (event && event.target) {
                event.target.closest('.nav-btn').classList.add('active');
            }
            
            // Load section data
            switch(sectionName) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'pets':
                    loadPets();
                    break;
                case 'volunteers':
                    loadVolunteers();
                    break;
                case 'visits':
                    loadVisits();
                    break;
                case 'adoptions':
                    loadAdoptions();
                    break;
                case 'sponsors':
                    loadSponsors();
                    break;
                case 'medical':
                    loadMedicalRecords();
                    break;
                case 'events':
                    loadEvents();
                    break;
                case 'donations':
                    loadDonations();
                    break;
                case 'public-transparency':
                    loadTransactions();
                    updateFinancialSummary();
                    loadGoals();
                    break;
                case 'stats':
                    loadStats();
                    break;
                case 'content':
                    loadContent();
                    break;
                case 'messages':
                    loadMessages();
                    updateMessagesBadge();
                    break;
            }
        }

        function loadDashboard() {
            console.log('üè† Carregando dashboard moderno...');
            
            const pets = adminData.getPets();
            const messages = adminData.getMessages();
            const volunteers = adminData.getVolunteers();
            const visits = adminData.getVisits();
            const adoptions = adminData.getAdoptions();
            const sponsors = adminData.getSponsors();
            const events = adminData.getEvents();
            const donations = adminData.getDonations();
            const transactions = adminData.getTransactions ? adminData.getTransactions() : [];
            
            // Calcular estat√≠sticas principais
            const totalPets = pets.length;
            const totalAdoptions = adoptions.filter(a => a.status === 'Aprovada').length;
            const totalVolunteers = volunteers.filter(v => v.status === 'Ativo').length;
            
            // Calcular saldo financeiro
            const financialSummary = adminData.getFinancialSummary ? adminData.getFinancialSummary() : {
                totalIncome: 0,
                totalExpenses: 0,
                currentBalance: 0
            };
            
            // Atualizar cards de estat√≠sticas
            document.getElementById('total-pets').textContent = totalPets;
            document.getElementById('total-adoptions').textContent = totalAdoptions;
            document.getElementById('total-volunteers').textContent = totalVolunteers;
            document.getElementById('total-balance').textContent = formatCurrency(financialSummary.currentBalance);
            
            // Atualizar mudan√ßas mensais (simulado)
            document.getElementById('pets-change').textContent = `+${Math.floor(Math.random() * 5) + 1} este m√™s`;
            document.getElementById('adoptions-change').textContent = `+${Math.floor(Math.random() * 3) + 1} este m√™s`;
            document.getElementById('volunteers-change').textContent = `+${Math.floor(Math.random() * 2) + 1} este m√™s`;
            
            const balanceChange = Math.floor(Math.random() * 1000) + 100;
            const balanceChangeEl = document.getElementById('balance-change');
            balanceChangeEl.textContent = `+${formatCurrency(balanceChange)} este m√™s`;
            balanceChangeEl.className = 'stat-change positive';
            
            // Carregar atividades recentes
            loadRecentActivities();
            
            // Carregar pets em destaque
            loadFeaturedPets();
            
            // Carregar alertas
            loadDashboardAlerts();
            
            // Carregar resumo financeiro
            loadFinancialSummary();
            
            // Inicializar gr√°ficos (simulados)
            initializeCharts();
            
            console.log('‚úÖ Dashboard moderno carregado!');
        }
        
        function loadRecentActivities() {
            const activities = [
                { icon: 'üêæ', title: 'Novo pet cadastrado: Luna', time: 'h√° 2 horas' },
                { icon: '‚ù§Ô∏è', title: 'Ado√ß√£o aprovada para Max', time: 'h√° 4 horas' },
                { icon: 'üôã‚Äç‚ôÄÔ∏è', title: 'Novo volunt√°rio: Maria Silva', time: 'h√° 6 horas' },
                { icon: 'üí∞', title: 'Doa√ß√£o recebida: R$ 150,00', time: 'h√° 1 dia' },
                { icon: 'üè•', title: 'Consulta veterin√°ria: Thor', time: 'h√° 2 dias' }
            ];
            
            const activitiesHtml = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon">${activity.icon}</div>
                    <div class="activity-content">
                        <div class="activity-title">${activity.title}</div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('recent-activities').innerHTML = activitiesHtml;
        }
        
        function loadFeaturedPets() {
            const pets = adminData.getPets();
            const featuredPets = pets.filter(pet => pet.status === 'Dispon√≠vel').slice(0, 3);
            
            const petsHtml = featuredPets.map(pet => `
                <div class="featured-pet">
                    <div class="pet-avatar">${pet.emoji || 'üêæ'}</div>
                    <div class="pet-info">
                        <div class="pet-name">${pet.name}</div>
                        <div class="pet-details">${pet.type} ‚Ä¢ ${pet.age}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('featured-pets').innerHTML = petsHtml || '<p style="text-align: center; color: #6c757d; padding: 2rem;">Nenhum pet dispon√≠vel</p>';
        }
        
        function loadDashboardAlerts() {
            const alerts = [
                { type: 'warning', icon: '‚ö†Ô∏è', title: 'Vacinas Pendentes', description: '3 pets precisam de vacinas este m√™s' },
                { type: 'info', icon: '‚ÑπÔ∏è', title: 'Visitas Agendadas', description: '5 visitas marcadas para esta semana' },
                { type: 'danger', icon: 'üö®', title: 'Medicamentos', description: 'Estoque baixo de verm√≠fugos' }
            ];
            
            const alertsHtml = alerts.map(alert => `
                <div class="alert-item ${alert.type}">
                    <div class="alert-icon">${alert.icon}</div>
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-description">${alert.description}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('dashboard-alerts').innerHTML = alertsHtml;
        }
        
        function loadFinancialSummary() {
            const summary = adminData.getFinancialSummary ? adminData.getFinancialSummary() : {
                totalIncome: 0,
                totalExpenses: 0,
                currentBalance: 0
            };
            
            document.getElementById('total-income').textContent = formatCurrency(summary.totalIncome);
            document.getElementById('total-expenses').textContent = formatCurrency(summary.totalExpenses);
            document.getElementById('current-balance').textContent = formatCurrency(summary.currentBalance);
        }
        
        function initializeCharts() {
            // Simular gr√°ficos com dados de exemplo
            const adoptionsChart = document.getElementById('adoptions-chart');
            const petsChart = document.getElementById('pets-chart');
            const financialChart = document.getElementById('financial-chart');
            
            if (adoptionsChart) {
                adoptionsChart.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                adoptionsChart.style.borderRadius = '10px';
                adoptionsChart.style.display = 'flex';
                adoptionsChart.style.alignItems = 'center';
                adoptionsChart.style.justifyContent = 'center';
                adoptionsChart.style.color = 'white';
                adoptionsChart.style.fontSize = '1.2rem';
                adoptionsChart.style.fontWeight = 'bold';
                adoptionsChart.innerHTML = 'üìà Gr√°fico de Ado√ß√µes<br><small style="opacity: 0.8;">Em desenvolvimento</small>';
            }
            
            if (petsChart) {
                petsChart.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
                petsChart.style.borderRadius = '10px';
                petsChart.style.display = 'flex';
                petsChart.style.alignItems = 'center';
                petsChart.style.justifyContent = 'center';
                petsChart.style.color = 'white';
                petsChart.style.fontSize = '1.2rem';
                petsChart.style.fontWeight = 'bold';
                petsChart.innerHTML = 'üêï Distribui√ß√£o de Pets<br><small style="opacity: 0.8;">Em desenvolvimento</small>';
            }
            
            if (financialChart) {
                financialChart.style.background = 'linear-gradient(135deg, #17a2b8, #6f42c1)';
                financialChart.style.borderRadius = '10px';
                financialChart.style.display = 'flex';
                financialChart.style.alignItems = 'center';
                financialChart.style.justifyContent = 'center';
                financialChart.style.color = 'white';
                financialChart.style.fontSize = '1.2rem';
                financialChart.style.fontWeight = 'bold';
                financialChart.innerHTML = 'üí≥ Gr√°fico Financeiro<br><small style="opacity: 0.8;">Em desenvolvimento</small>';
            }
        }
        
        function refreshDashboard() {
            showAlert('Dashboard atualizado!', 'success');
            loadDashboard();
        }
        
        function exportReport() {
            showAlert('Relat√≥rio exportado com sucesso!', 'success');
        }
        
        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value || 0);
        }
        
        function updateAdoptionChart() {
            // Fun√ß√£o para atualizar gr√°fico de ado√ß√µes
            showAlert('Gr√°fico atualizado!', 'info');
        }


        function loadPets() {
            const pets = adminData.getPets();
            const tbody = document.getElementById('pets-table-body');
            
            tbody.innerHTML = pets.map(pet => `
                <tr>
                    <td data-label="Nome">${pet.emoji} ${pet.name}</td>
                    <td data-label="Tipo">${pet.type}</td>
                    <td data-label="Idade">${pet.age}</td>
                    <td data-label="Status"><span class="status-badge status-${pet.status.toLowerCase().replace(' ', '-')}">${pet.status}</span></td>
                    <td data-label="Data">${new Date(pet.dateAdded).toLocaleDateString('pt-BR')}</td>
                    <td data-label="A√ß√µes">
                        <button class="btn btn-small btn-primary" onclick="editPet(${pet.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deletePet(${pet.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadStats() {
            const stats = adminData.getStats();
            document.getElementById('animals-rescued').value = stats.animalsRescued || 0;
            document.getElementById('adoptions-completed').value = stats.adoptionsCompleted || 0;
            document.getElementById('volunteers-active').value = stats.volunteersActive || 0;
            document.getElementById('partners-count').value = stats.partnersCount || 0;
        }

        function loadContent() {
            const content = adminData.getContent();
            document.getElementById('hero-title').value = content.heroTitle || '';
            document.getElementById('hero-subtitle').value = content.heroSubtitle || '';
            document.getElementById('about-text').value = content.aboutText || '';
            document.getElementById('contact-phone').value = content.contactInfo?.phone || '';
            document.getElementById('contact-email').value = content.contactInfo?.email || '';
            document.getElementById('contact-address').value = content.contactInfo?.address || '';
        }

        function loadMessages() {
            const messages = adminData.getMessages();
            const container = document.getElementById('messages-list');
            
            if (messages.length === 0) {
                container.innerHTML = '<p>Nenhuma mensagem recebida ainda.</p>';
                return;
            }
            
            container.innerHTML = messages.map(msg => `
                <div class="admin-card ${msg.read ? '' : 'unread'}" style="border-left: 4px solid ${msg.read ? '#28a745' : '#007bff'};">
                    <div class="card-header">
                        <div class="card-title">${msg.name}</div>
                        <div class="card-actions">
                            ${!msg.read ? `<button class="btn btn-small btn-primary" onclick="markAsRead(${msg.id})">Marcar como Lida</button>` : ''}
                            <button class="btn btn-small btn-danger" onclick="deleteMessage(${msg.id})">Excluir</button>
                        </div>
                    </div>
                    <p><strong>Email:</strong> ${msg.email}</p>
                    <p><strong>Data:</strong> ${new Date(msg.date).toLocaleString('pt-BR')}</p>
                    <p><strong>Mensagem:</strong></p>
                    <p>${msg.message}</p>
                </div>
            `).join('');
        }

        // Pet management functions
        function togglePetForm() {
            const form = document.getElementById('pet-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('pet-name').focus();
            }
        }

        function cancelPetForm() {
            document.getElementById('pet-form').style.display = 'none';
            document.getElementById('pet-form').reset();
            petTags = [];
            currentPetPhoto = null;
            updateTagsDisplay('pet-tags', petTags);
            resetPhotoUpload('pet');
        }

        function handlePetSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const petData = Object.fromEntries(formData);
            petData.tags = petTags;
            petData.photo = currentPetPhoto;
            
            adminData.addPet(petData);
            showAlert('Pet adicionado com sucesso!', 'success');
            cancelPetForm();
            loadPets();
            loadDashboard();
        }

        function editPet(id) {
            const pet = adminData.getPets().find(p => p.id === id);
            if (!pet) return;
            
            currentEditingPet = pet;
            editPetTags = [...pet.tags];
            currentEditPetPhoto = pet.photo;
            
            document.getElementById('edit-pet-id').value = pet.id;
            document.getElementById('edit-pet-name').value = pet.name;
            document.getElementById('edit-pet-type').value = pet.type;
            document.getElementById('edit-pet-age').value = pet.age;
            document.getElementById('edit-pet-emoji').value = pet.emoji;
            document.getElementById('edit-pet-description').value = pet.description;
            document.getElementById('edit-pet-status').value = pet.status;
            
            // Load existing photo
            if (pet.photo) {
                showPhotoPreview('edit-pet', pet.photo);
            } else {
                resetPhotoUpload('edit-pet');
            }
            
            updateTagsDisplay('edit-pet-tags', editPetTags);
            document.getElementById('edit-pet-modal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('edit-pet-modal').style.display = 'none';
            currentEditingPet = null;
            editPetTags = [];
            currentEditPetPhoto = null;
            resetPhotoUpload('edit-pet');
        }

        function handleEditPetSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const petData = Object.fromEntries(formData);
            petData.tags = editPetTags;
            petData.photo = currentEditPetPhoto;
            
            const id = parseInt(document.getElementById('edit-pet-id').value);
            adminData.updatePet(id, petData);
            showAlert('Pet atualizado com sucesso!', 'success');
            closeEditModal();
            loadPets();
        }

        function deletePet(id) {
            if (confirm('Tem certeza que deseja excluir este pet?')) {
                adminData.deletePet(id);
                showAlert('Pet exclu√≠do com sucesso!', 'success');
                loadPets();
                loadDashboard();
            }
        }

        // Stats management
        function handleStatsSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const statsData = {};
            for (let [key, value] of formData.entries()) {
                statsData[key] = parseInt(value);
            }
            
            adminData.updateStats(statsData);
            showAlert('Estat√≠sticas atualizadas com sucesso!', 'success');
            loadDashboard();
        }

        // Content management
        function handleContentSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const contentData = Object.fromEntries(formData);
            
            const updatedContent = {
                heroTitle: contentData.heroTitle,
                heroSubtitle: contentData.heroSubtitle,
                aboutText: contentData.aboutText,
                contactInfo: {
                    phone: contentData.contactPhone,
                    email: contentData.contactEmail,
                    address: contentData.contactAddress
                }
            };
            
            adminData.updateContent(updatedContent);
            showAlert('Conte√∫do atualizado com sucesso!', 'success');
        }

        // Message management
        function markAsRead(id) {
            adminData.markMessageAsRead(id);
            loadMessages();
            loadDashboard();
        }

        function deleteMessage(id) {
            if (confirm('Tem certeza que deseja excluir esta mensagem?')) {
                adminData.deleteMessage(id);
                showAlert('Mensagem exclu√≠da com sucesso!', 'success');
                loadMessages();
                loadDashboard();
            }
        }

        // Backup functions
        function exportData() {
            const data = adminData.exportData();
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `liga-do-bem-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showAlert('Backup baixado com sucesso!', 'success');
        }

        function importData() {
            const fileInput = document.getElementById('backup-file');
            const file = fileInput.files[0];
            
            if (!file) {
                showAlert('Por favor, selecione um arquivo de backup.', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    adminData.importData(data);
                    showAlert('Backup restaurado com sucesso!', 'success');
                    loadDashboard();
                    loadPets();
                    loadStats();
                    loadContent();
                    loadMessages();
                } catch (error) {
                    showAlert('Erro ao restaurar backup. Arquivo inv√°lido.', 'error');
                }
            };
            reader.readAsText(file);
        }

        function resetSystem() {
            if (confirm('ATEN√á√ÉO: Esta a√ß√£o ir√° apagar todos os dados! Tem certeza?')) {
                if (confirm('Esta a√ß√£o √© irrevers√≠vel! Confirma novamente?')) {
                    adminData.resetToDefaultData();
                    showAlert('Sistema resetado para os dados padr√£o!', 'success');
                    loadDashboard();
                    loadPets();
                    loadStats();
                    loadContent();
                    loadMessages();
                }
            }
        }

        // Tags management
        function setupTagsInput(containerId, tagsArray) {
            const container = document.getElementById(containerId);
            const input = container.querySelector('.tag-input');
            
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const tag = this.value.trim();
                    if (tag && !tagsArray.includes(tag)) {
                        tagsArray.push(tag);
                        updateTagsDisplay(containerId, tagsArray);
                        this.value = '';
                    }
                }
            });
        }

        function updateTagsDisplay(containerId, tagsArray) {
            const container = document.getElementById(containerId);
            const input = container.querySelector('.tag-input');
            
            // Remove existing tags
            container.querySelectorAll('.tag-item').forEach(tag => tag.remove());
            
            // Add tags
            tagsArray.forEach((tag, index) => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag-item';
                tagElement.innerHTML = `
                    ${tag}
                    <button type="button" class="tag-remove" onclick="removeTag('${containerId}', ${index})">&times;</button>
                `;
                container.insertBefore(tagElement, input);
            });
        }

        function removeTag(containerId, index) {
            if (containerId === 'pet-tags') {
                petTags.splice(index, 1);
                updateTagsDisplay(containerId, petTags);
            } else if (containerId === 'edit-pet-tags') {
                editPetTags.splice(index, 1);
                updateTagsDisplay(containerId, editPetTags);
            }
        }

        // Utility functions
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '9999';
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                document.body.removeChild(alertDiv);
            }, 3000);
        }

        // Photo upload functions
        function handlePhotoUpload(event, prefix) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (5MB limit)
            if (file.size > 5 * 1024 * 1024) {
                showPhotoError(prefix, 'Arquivo muito grande! M√°ximo 5MB.');
                return;
            }
            
            // Check file type
            if (!file.type.startsWith('image/')) {
                showPhotoError(prefix, 'Por favor, selecione apenas arquivos de imagem.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                if (prefix === 'pet') {
                    currentPetPhoto = base64;
                } else if (prefix === 'edit-pet') {
                    currentEditPetPhoto = base64;
                }
                showPhotoPreview(prefix, base64);
                hidePhotoError(prefix);
            };
            reader.readAsDataURL(file);
        }
        
        function showPhotoPreview(prefix, base64) {
            const previewContainer = document.getElementById(`${prefix}-photo-preview-container`);
            const preview = document.getElementById(`${prefix}-photo-preview`);
            const text = document.getElementById(`${prefix}-photo-text`);
            const icon = document.querySelector(`#${prefix}-photo-upload .photo-upload-icon`);
            
            preview.src = base64;
            previewContainer.style.display = 'block';
            text.innerHTML = '<span class="has-photo">‚úÖ Foto carregada com sucesso!</span>';
            icon.style.display = 'none';
        }
        
        function removePhoto(prefix) {
            if (prefix === 'pet') {
                currentPetPhoto = null;
            } else if (prefix === 'edit-pet') {
                currentEditPetPhoto = null;
            }
            resetPhotoUpload(prefix);
        }
        
        function resetPhotoUpload(prefix) {
            const previewContainer = document.getElementById(`${prefix}-photo-preview-container`);
            const text = document.getElementById(`${prefix}-photo-text`);
            const icon = document.querySelector(`#${prefix}-photo-upload .photo-upload-icon`);
            const input = document.getElementById(`${prefix}-photo-input`);
            
            previewContainer.style.display = 'none';
            text.innerHTML = `
                Clique aqui ou arraste uma foto do pet<br>
                <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
            `;
            text.className = 'photo-upload-text';
            icon.style.display = 'block';
            input.value = '';
            hidePhotoError(prefix);
        }
        
        function showPhotoError(prefix, message) {
            const errorDiv = document.getElementById(`${prefix}-photo-error`);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }
        
        function hidePhotoError(prefix) {
            const errorDiv = document.getElementById(`${prefix}-photo-error`);
            errorDiv.style.display = 'none';
        }
        
        // Drag and drop functionality
        
        function setupDragAndDrop(containerId, prefix) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.addEventListener('dragover', function(e) {
                e.preventDefault();
                container.classList.add('dragover');
            });
            
            container.addEventListener('dragleave', function(e) {
                e.preventDefault();
                container.classList.remove('dragover');
            });
            
            container.addEventListener('drop', function(e) {
                e.preventDefault();
                container.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const input = document.getElementById(`${prefix}-photo-input`);
                    input.files = files;
                    handlePhotoUpload({ target: input }, prefix);
                }
            });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('edit-pet-modal');
            if (event.target === modal) {
                closeEditModal();
            }
        }

        // ========== NOVAS FUNCIONALIDADES ==========

        // Gerenciamento de Volunt√°rios
        function toggleVolunteerForm() {
            const form = document.getElementById('volunteer-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('volunteer-name').focus();
            }
        }

        function cancelVolunteerForm() {
            document.getElementById('volunteer-form').style.display = 'none';
            document.getElementById('volunteer-form').reset();
        }

        function handleVolunteerSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const volunteerData = Object.fromEntries(formData);
            
            adminData.addVolunteer(volunteerData);
            showAlert('Volunt√°rio cadastrado com sucesso!', 'success');
            cancelVolunteerForm();
            loadVolunteers();
            loadDashboard();
        }

        function loadVolunteers() {
            const volunteers = adminData.getVolunteers();
            const tbody = document.getElementById('volunteers-table-body');
            
            tbody.innerHTML = volunteers.map(volunteer => `
                <tr>
                    <td data-label="Nome">${volunteer.name}</td>
                    <td data-label="Email">${volunteer.email}</td>
                    <td data-label="Telefone">${volunteer.phone}</td>
                    <td data-label="Disponibilidade">${volunteer.availability}</td>
                    <td data-label="Status"><span class="status-badge status-${volunteer.status.toLowerCase()}">${volunteer.status}</span></td>
                    <td data-label="Pontos"><span class="volunteer-points">${volunteer.points} pts</span></td>
                    <td data-label="A√ß√µes">
                        <button class="btn btn-small btn-primary" onclick="editVolunteer(${volunteer.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deleteVolunteer(${volunteer.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function deleteVolunteer(id) {
            if (confirm('Tem certeza que deseja excluir este volunt√°rio?')) {
                adminData.deleteVolunteer(id);
                showAlert('Volunt√°rio exclu√≠do com sucesso!', 'success');
                loadVolunteers();
            }
        }

        // Gerenciamento de Visitas
        function toggleVisitForm() {
            const form = document.getElementById('visit-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('visit-pet');
                document.getElementById('visit-visitor-name').focus();
            }
        }

        function cancelVisitForm() {
            document.getElementById('visit-form').style.display = 'none';
            document.getElementById('visit-form').reset();
        }

        function handleVisitSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const visitData = Object.fromEntries(formData);
            
            adminData.addVisit(visitData);
            showAlert('Visita agendada com sucesso!', 'success');
            cancelVisitForm();
            loadVisits();
        }

        function loadVisits() {
            const visits = adminData.getVisits();
            const pets = adminData.getPets();
            const tbody = document.getElementById('visits-table-body');
            
            tbody.innerHTML = visits.map(visit => {
                const pet = pets.find(p => p.id == visit.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td data-label="Visitante">${visit.visitorName}</td>
                        <td data-label="Pet">${petName}</td>
                        <td data-label="Data/Hora">${new Date(visit.dateScheduled).toLocaleString('pt-BR')}</td>
                        <td data-label="Tipo">${visit.type}</td>
                        <td data-label="Status"><span class="status-badge status-${visit.status.toLowerCase()}">${visit.status}</span></td>
                        <td data-label="A√ß√µes">
                            <button class="btn btn-small btn-success" onclick="markVisitCompleted(${visit.id})">Realizada</button>
                            <button class="btn btn-small btn-danger" onclick="cancelVisit(${visit.id})">Cancelar</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function markVisitCompleted(id) {
            adminData.updateVisit(id, { status: 'Realizada' });
            showAlert('Visita marcada como realizada!', 'success');
            loadVisits();
        }

        function cancelVisit(id) {
            if (confirm('Tem certeza que deseja cancelar esta visita?')) {
                adminData.updateVisit(id, { status: 'Cancelada' });
                showAlert('Visita cancelada!', 'info');
                loadVisits();
            }
        }

        // Gerenciamento de Ado√ß√µes
        function toggleAdoptionForm() {
            const form = document.getElementById('adoption-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('adoption-pet');
                document.getElementById('adoption-adopter-name').focus();
            }
        }

        function cancelAdoptionForm() {
            document.getElementById('adoption-form').style.display = 'none';
            document.getElementById('adoption-form').reset();
        }

        function handleAdoptionSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const adoptionData = Object.fromEntries(formData);
            
            adminData.addAdoption(adoptionData);
            showAlert('Processo de ado√ß√£o iniciado com sucesso!', 'success');
            cancelAdoptionForm();
            loadAdoptions();
        }

        function loadAdoptions() {
            const adoptions = adminData.getAdoptions();
            const pets = adminData.getPets();
            const tbody = document.getElementById('adoptions-table-body');
            
            tbody.innerHTML = adoptions.map(adoption => {
                const pet = pets.find(p => p.id == adoption.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td>${adoption.adopterName}</td>
                        <td>${petName}</td>
                        <td>${new Date(adoption.dateStarted).toLocaleDateString('pt-BR')}</td>
                        <td><span class="status-badge status-${adoption.status.toLowerCase().replace(' ', '-')}">${adoption.status}</span></td>
                        <td>
                            <button class="btn btn-small btn-success" onclick="approveAdoption(${adoption.id})">Aprovar</button>
                            <button class="btn btn-small btn-danger" onclick="rejectAdoption(${adoption.id})">Reprovar</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function approveAdoption(id) {
            const adoption = adminData.getAdoptions().find(a => a.id === id);
            if (adoption) {
                adminData.updateAdoption(id, { status: 'Aprovada' });
                // Atualizar status do pet para "Adotado"
                adminData.updatePet(adoption.petId, { status: 'Adotado' });
                showAlert('Ado√ß√£o aprovada com sucesso!', 'success');
                loadAdoptions();
                loadPets();
                loadDashboard();
            }
        }

        function rejectAdoption(id) {
            if (confirm('Tem certeza que deseja reprovar esta ado√ß√£o?')) {
                adminData.updateAdoption(id, { status: 'Reprovada' });
                showAlert('Ado√ß√£o reprovada!', 'info');
                loadAdoptions();
            }
        }

        // Gerenciamento de Padrinhos
        function toggleSponsorForm() {
            const form = document.getElementById('sponsor-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('sponsor-pet');
                document.getElementById('sponsor-name').focus();
            }
        }

        function cancelSponsorForm() {
            document.getElementById('sponsor-form').style.display = 'none';
            document.getElementById('sponsor-form').reset();
        }

        function handleSponsorSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const sponsorData = Object.fromEntries(formData);
            
            adminData.addSponsor(sponsorData);
            showAlert('Padrinho cadastrado com sucesso!', 'success');
            cancelSponsorForm();
            loadSponsors();
        }

        function loadSponsors() {
            const sponsors = adminData.getSponsors();
            const pets = adminData.getPets();
            const tbody = document.getElementById('sponsors-table-body');
            
            tbody.innerHTML = sponsors.map(sponsor => {
                const pet = pets.find(p => p.id == sponsor.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td>${sponsor.name}</td>
                        <td>${petName}</td>
                        <td><span class="sponsor-amount">R$ ${sponsor.monthlyAmount}</span></td>
                        <td>R$ ${sponsor.totalDonated.toFixed(2)}</td>
                        <td><span class="status-badge status-${sponsor.status.toLowerCase()}">${sponsor.status}</span></td>
                        <td>
                            <button class="btn btn-small btn-primary" onclick="editSponsor(${sponsor.id})">Editar</button>
                            <button class="btn btn-small btn-danger" onclick="deleteSponsor(${sponsor.id})">Excluir</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function deleteSponsor(id) {
            if (confirm('Tem certeza que deseja excluir este padrinho?')) {
                adminData.deleteSponsor(id);
                showAlert('Padrinho exclu√≠do com sucesso!', 'success');
                loadSponsors();
            }
        }

        // Gerenciamento M√©dico
        function toggleMedicalForm() {
            const form = document.getElementById('medical-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('medical-pet');
                document.getElementById('medical-pet').focus();
            }
        }

        function cancelMedicalForm() {
            document.getElementById('medical-form').style.display = 'none';
            document.getElementById('medical-form').reset();
        }

        function handleMedicalSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const medicalData = Object.fromEntries(formData);
            
            // Add medical record
            adminData.addMedicalRecord(parseInt(medicalData.petId), medicalData);
            
            // Automatically create financial transaction if cost is provided
            if (medicalData.cost && parseFloat(medicalData.cost) > 0) {
                const pet = adminData.getPets().find(p => p.id === parseInt(medicalData.petId));
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet';
                
                const transactionData = {
                    type: 'expense',
                    category: 'veterinary',
                    description: `${medicalData.type} - ${petName}`,
                    amount: parseFloat(medicalData.cost),
                    date: medicalData.date,
                    veterinarian: medicalData.veterinarian || 'N√£o informado',
                    petId: parseInt(medicalData.petId),
                    medicalRecordId: Date.now() // Link to medical record
                };
                
                adminData.addTransaction(transactionData);
                showAlert('Registro m√©dico e gasto financeiro adicionados com sucesso!', 'success');
            } else {
                showAlert('Registro m√©dico adicionado com sucesso!', 'success');
            }
            
            cancelMedicalForm();
            loadMedicalRecords();
            loadTransactions(); // Refresh transactions list
        }

        function loadMedicalRecords() {
            const pets = adminData.getPets();
            const container = document.getElementById('medical-records-list');
            
            // Load pet options for filter
            const filterSelect = document.getElementById('medical-filter-pet');
            filterSelect.innerHTML = '<option value="">Todos os pets</option>' + 
                pets.map(pet => `<option value="${pet.id}">${pet.emoji} ${pet.name}</option>`).join('');
            
            // Load all medical records
            let allRecords = [];
            pets.forEach(pet => {
                if (pet.medicalHistory && pet.medicalHistory.length > 0) {
                    pet.medicalHistory.forEach(record => {
                        allRecords.push({
                            ...record,
                            petName: `${pet.emoji} ${pet.name}`,
                            petId: pet.id
                        });
                    });
                }
            });
            
            // Sort by date (newest first)
            allRecords.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (allRecords.length === 0) {
                container.innerHTML = '<p>Nenhum registro m√©dico encontrado.</p>';
                return;
            }
            
            container.innerHTML = allRecords.map(record => `
                <div class="medical-record">
                    <div class="medical-record-header">
                        <div>
                            <span class="medical-record-type">${record.type}</span>
                            <strong>${record.petName}</strong>
                        </div>
                        <div class="medical-record-date">${new Date(record.date).toLocaleDateString('pt-BR')}</div>
                    </div>
                    <div class="medical-record-content">
                        <div class="medical-record-vet">Dr(a). ${record.veterinarian}</div>
                        <p>${record.description}</p>
                        ${record.cost ? `<div class="medical-record-cost">Custo: R$ ${parseFloat(record.cost).toFixed(2)}</div>` : ''}
                        ${record.nextAppointment ? `<p><strong>Pr√≥ximo procedimento:</strong> ${new Date(record.nextAppointment).toLocaleDateString('pt-BR')}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function filterMedicalRecords() {
            const selectedPetId = document.getElementById('medical-filter-pet').value;
            const pets = adminData.getPets();
            const container = document.getElementById('medical-records-list');
            
            let filteredRecords = [];
            
            if (selectedPetId) {
                const pet = pets.find(p => p.id == selectedPetId);
                if (pet && pet.medicalHistory) {
                    pet.medicalHistory.forEach(record => {
                        filteredRecords.push({
                            ...record,
                            petName: `${pet.emoji} ${pet.name}`,
                            petId: pet.id
                        });
                    });
                }
            } else {
                pets.forEach(pet => {
                    if (pet.medicalHistory && pet.medicalHistory.length > 0) {
                        pet.medicalHistory.forEach(record => {
                            filteredRecords.push({
                                ...record,
                                petName: `${pet.emoji} ${pet.name}`,
                                petId: pet.id
                            });
                        });
                    }
                });
            }
            
            filteredRecords.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (filteredRecords.length === 0) {
                container.innerHTML = '<p>Nenhum registro m√©dico encontrado.</p>';
                return;
            }
            
            container.innerHTML = filteredRecords.map(record => `
                <div class="medical-record">
                    <div class="medical-record-header">
                        <div>
                            <span class="medical-record-type">${record.type}</span>
                            <strong>${record.petName}</strong>
                        </div>
                        <div class="medical-record-date">${new Date(record.date).toLocaleDateString('pt-BR')}</div>
                    </div>
                    <div class="medical-record-content">
                        <div class="medical-record-vet">Dr(a). ${record.veterinarian}</div>
                        <p>${record.description}</p>
                        ${record.cost ? `<div class="medical-record-cost">Custo: R$ ${parseFloat(record.cost).toFixed(2)}</div>` : ''}
                        ${record.nextAppointment ? `<p><strong>Pr√≥ximo procedimento:</strong> ${new Date(record.nextAppointment).toLocaleDateString('pt-BR')}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Gerenciamento de Transa√ß√µes Financeiras
        function loadTransactions() {
            console.log('üí∞ Carregando transpar√™ncia financeira...');
            
            // Adicionar dados de exemplo se n√£o existirem
            addSampleTransactions();
            
            const transactions = adminData.getTransactions();
            const tbody = document.getElementById('transactions-table-body');
            
            // Carregar gr√°ficos
            loadFinancialCharts();
            
            if (!tbody) return; // Se n√£o estiver na p√°gina de transpar√™ncia
            
            if (transactions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">Nenhuma transa√ß√£o encontrada.</td></tr>';
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            const sortedTransactions = transactions.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            tbody.innerHTML = sortedTransactions.map(transaction => {
                const typeClass = transaction.type === 'income' ? 'income' : 'expense';
                const typeText = transaction.type === 'income' ? 'Receita' : 'Despesa';
                const categoryText = getCategoryText(transaction.category);
                const amountText = transaction.type === 'income' ? 
                    `+R$ ${transaction.amount.toFixed(2)}` : 
                    `-R$ ${transaction.amount.toFixed(2)}`;
                
                return `
                    <tr class="transaction-${typeClass}">
                        <td>${new Date(transaction.date).toLocaleDateString('pt-BR')}</td>
                        <td><span class="transaction-type ${typeClass}">${typeText}</span></td>
                        <td><span class="transaction-category">${categoryText}</span></td>
                        <td>${transaction.description}</td>
                        <td class="transaction-amount ${typeClass}">${amountText}</td>
                        <td>
                            <button onclick="editTransaction(${transaction.id})" class="btn btn-sm btn-primary">Editar</button>
                            <button onclick="deleteTransaction(${transaction.id})" class="btn btn-sm btn-danger">Excluir</button>
                        </td>
                    </tr>
                `;
            }).join('');
            
            // Atualizar resumo financeiro
            updateFinancialSummary();
        }
        
        function getCategoryText(category) {
            const categories = {
                'donation': 'Doa√ß√£o',
                'adoption': 'Ado√ß√£o',
                'event': 'Evento',
                'veterinary': 'Veterin√°rio',
                'food': 'Alimenta√ß√£o',
                'supplies': 'Suprimentos',
                'maintenance': 'Manuten√ß√£o',
                'other': 'Outros'
            };
            return categories[category] || category;
        }
        
        function updateFinancialSummary() {
            const summary = adminData.getFinancialSummary();
            
            // Atualizar elementos do resumo financeiro
            const totalIncomeEl = document.getElementById('total-income');
            const totalExpensesEl = document.getElementById('total-expenses');
            const currentBalanceEl = document.getElementById('current-balance');
            
            if (totalIncomeEl) totalIncomeEl.textContent = `R$ ${summary.totalIncome.toFixed(2)}`;
            if (totalExpensesEl) totalExpensesEl.textContent = `R$ ${summary.totalExpenses.toFixed(2)}`;
            if (currentBalanceEl) {
                currentBalanceEl.textContent = `R$ ${summary.currentBalance.toFixed(2)}`;
                currentBalanceEl.className = summary.currentBalance >= 0 ? 'positive' : 'negative';
            }
            
            // Atualizar gr√°fico de gastos veterin√°rios
            updateVeterinaryChart();
        }
        
        function updateVeterinaryChart() {
            const vetExpenses = adminData.getVeterinaryExpenses()
                .sort((a, b) => new Date(b.date) - new Date(a.date)); // Ordenar por data (mais recentes primeiro)
            const chartContainer = document.getElementById('veterinary-chart');
            
            if (!chartContainer || vetExpenses.length === 0) return;
            
            const totalVetExpenses = vetExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            chartContainer.innerHTML = `
                <div class="vet-expenses-summary">
                    <h4>Gastos Veterin√°rios</h4>
                    <div class="vet-total">Total: R$ ${totalVetExpenses.toFixed(2)}</div>
                    <div class="vet-expenses-list">
                        ${vetExpenses.map(expense => `
                            <div class="vet-expense-item">
                                <span class="vet-expense-desc">${expense.description}</span>
                                <span class="vet-expense-amount">R$ ${expense.amount.toFixed(2)}</span>
                                <span class="vet-expense-date">${new Date(expense.date).toLocaleDateString('pt-BR')}</span>
                            </div>
                        `).join('')}
                        <div class="vet-summary">Total de ${vetExpenses.length} procedimento(s)</div>
                    </div>
                </div>
            `;
        }
        
        function toggleTransactionForm() {
            const form = document.getElementById('transaction-form');
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
                if (form.style.display === 'block') {
                    document.getElementById('transaction-description').focus();
                }
            }
        }
        
        function cancelTransactionForm() {
            const form = document.getElementById('transaction-form');
            if (form) {
                form.style.display = 'none';
                form.reset();
            }
        }
        
        // Fun√ß√µes para Metas/Campanhas
        function toggleGoalForm() {
            const form = document.getElementById('goal-form');
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
                if (form.style.display === 'block') {
                    document.getElementById('goal-title').focus();
                }
            }
        }
        
        function cancelGoal() {
            const form = document.getElementById('goal-form');
            if (form) {
                form.style.display = 'none';
                form.reset();
            }
        }
        
        function handleGoalSubmit(e) {
            e.preventDefault();
            
            const title = document.getElementById('goal-title').value;
            const target = parseFloat(document.getElementById('goal-target').value);
            const current = parseFloat(document.getElementById('goal-current').value);
            const description = document.getElementById('goal-description').value;
            const isPublic = document.getElementById('goal-public').checked;
            
            if (!title || !target || isNaN(target) || isNaN(current)) {
                showAlert('Por favor, preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }
            
            const goal = {
                id: Date.now(),
                title,
                target,
                current,
                description,
                isPublic,
                createdAt: new Date().toISOString()
            };
            
            // Salvar meta no localStorage
            let goals = JSON.parse(localStorage.getItem('ligaDoBem_goals') || '[]');
            goals.push(goal);
            localStorage.setItem('ligaDoBem_goals', JSON.stringify(goals));
            
            console.log('Nova meta criada e salva:', goal);
            
            // Limpar formul√°rio
            cancelGoal();
            
            // Atualizar lista de metas
            loadGoals();
            
            const publicMessage = goal.isPublic ? 
                ' A meta aparecer√° na p√°gina de transpar√™ncia p√∫blica!' : 
                ' Meta privada - n√£o aparecer√° no site p√∫blico.';
            
            showAlert('‚úÖ Meta criada com sucesso!' + publicMessage, 'success');
        }
        
        function loadGoals() {
            const goalsList = document.getElementById('goals-list');
            if (!goalsList) return;
            
            // Carregar metas do localStorage
            let goals = JSON.parse(localStorage.getItem('ligaDoBem_goals') || '[]');
            
            // Se n√£o houver metas, criar dados de exemplo
            if (goals.length === 0) {
                const sampleGoals = [
                    {
                        id: 1,
                        title: 'Campanha de Castra√ß√£o',
                        target: 2000.00,
                        current: 1250.00,
                        description: 'Meta para custear castra√ß√µes de animais resgatados',
                        isPublic: true,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        title: 'Reforma do Canil',
                        target: 5000.00,
                        current: 800.00,
                        description: 'Melhorias na infraestrutura do abrigo',
                        isPublic: false,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 3,
                        title: 'Medicamentos de Emerg√™ncia',
                        target: 1500.00,
                        current: 900.00,
                        description: 'Fundo para medicamentos de emerg√™ncia',
                        isPublic: true,
                        createdAt: new Date().toISOString()
                    }
                ];
                
                // Salvar dados de exemplo
                localStorage.setItem('ligaDoBem_goals', JSON.stringify(sampleGoals));
                goals = sampleGoals;
            }
            
            goalsList.innerHTML = goals.map(goal => {
                const percentage = Math.min((goal.current / goal.target) * 100, 100);
                const status = percentage >= 100 ? 'Conclu√≠da' : 'Em andamento';
                const statusClass = percentage >= 100 ? 'success' : 'warning';
                
                return `
                    <div class="goal-item">
                        <div class="goal-header">
                            <h4>${goal.title}</h4>
                            <span class="goal-status ${statusClass}">${status}</span>
                        </div>
                        <div class="goal-description">${goal.description}</div>
                        <div class="goal-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${percentage}%"></div>
                            </div>
                            <div class="progress-text">
                                R$ ${goal.current.toFixed(2)} de R$ ${goal.target.toFixed(2)} (${percentage.toFixed(1)}%)
                            </div>
                        </div>
                        <div class="goal-actions">
                            <span class="goal-visibility">${goal.isPublic ? 'üëÅÔ∏è P√∫blico' : 'üîí Privado'}</span>
                            <button class="btn btn-small btn-secondary" onclick="editGoal(${goal.id})">Editar</button>
                            <button class="btn btn-small btn-danger" onclick="deleteGoal(${goal.id})">Excluir</button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function editGoal(id) {
            // Carregar metas do localStorage
            const goals = JSON.parse(localStorage.getItem('ligaDoBem_goals') || '[]');
            const goal = goals.find(g => g.id === id);
            
            if (!goal) {
                showAlert('Meta n√£o encontrada!', 'error');
                return;
            }
            
            // Prompt para novo valor atual
            const newCurrentValue = prompt(
                `Atualizar progresso da meta "${goal.title}":\n\nValor atual: R$ ${goal.current.toFixed(2)}\nMeta: R$ ${goal.target.toFixed(2)}\n\nDigite o novo valor atual:`,
                goal.current.toFixed(2)
            );
            
            if (newCurrentValue === null) return; // Cancelado
            
            const newCurrent = parseFloat(newCurrentValue);
            if (isNaN(newCurrent) || newCurrent < 0) {
                showAlert('Por favor, digite um valor v√°lido!', 'error');
                return;
            }
            
            // Atualizar a meta
            goal.current = newCurrent;
            goal.updatedAt = new Date().toISOString();
            
            // Salvar no localStorage
            const updatedGoals = goals.map(g => g.id === id ? goal : g);
            localStorage.setItem('ligaDoBem_goals', JSON.stringify(updatedGoals));
            
            // Recarregar lista
            loadGoals();
            
            const percentage = Math.min((newCurrent / goal.target) * 100, 100).toFixed(1);
            const publicMessage = goal.isPublic ? 
                ' Mudan√ßa refletir√° na p√°gina p√∫blica!' : 
                ' (Meta privada)';
            
            showAlert(`‚úÖ Meta atualizada! Progresso: ${percentage}%${publicMessage}`, 'success');
        }
        
        // Fun√ß√£o para testar integra√ß√£o com p√°gina p√∫blica
        function testPublicIntegration() {
            const publicGoals = JSON.parse(localStorage.getItem('ligaDoBem_goals') || '[]')
                .filter(goal => goal.isPublic);
            
            if (publicGoals.length === 0) {
                showAlert('‚ö†Ô∏è Nenhuma meta p√∫blica encontrada! Crie uma meta marcada como p√∫blica para testar.', 'warning');
                return;
            }
            
            const message = `üîó Integra√ß√£o funcionando!\n\n` +
                `‚úÖ ${publicGoals.length} meta(s) p√∫blica(s) encontrada(s)\n` +
                `üìä Dados salvos no localStorage\n` +
                `üåê Vis√≠vel na p√°gina de transpar√™ncia\n\n` +
                `Metas p√∫blicas:\n${publicGoals.map(g => `‚Ä¢ ${g.title} (${((g.current/g.target)*100).toFixed(1)}%)`).join('\n')}`;
            
            alert(message);
        }
        
        function deleteGoal(id) {
            if (confirm('Tem certeza que deseja excluir esta meta?')) {
                // Carregar metas do localStorage
                let goals = JSON.parse(localStorage.getItem('ligaDoBem_goals') || '[]');
                
                // Filtrar removendo a meta com o ID especificado
                goals = goals.filter(goal => goal.id !== id);
                
                // Salvar de volta no localStorage
                localStorage.setItem('ligaDoBem_goals', JSON.stringify(goals));
                
                // Recarregar lista
                loadGoals();
                
                showAlert('Meta exclu√≠da com sucesso!', 'success');
            }
        }
        
        // Fun√ß√£o para adicionar dados de exemplo
        function addSampleTransactions() {
            const transactions = adminData.getTransactions();
            
            // Se j√° existem transa√ß√µes, n√£o adicionar exemplos
            if (transactions.length > 0) return;
            
            console.log('üìä Adicionando dados de exemplo para transpar√™ncia...');
            
            const sampleTransactions = [
                // Receitas
                { type: 'income', category: 'donation', amount: 500.00, date: '2024-01-15', description: 'Doa√ß√£o - Maria Silva' },
                { type: 'income', category: 'donation', amount: 250.00, date: '2024-01-20', description: 'Doa√ß√£o - Jo√£o Santos' },
                { type: 'income', category: 'adoption', amount: 100.00, date: '2024-01-25', description: 'Taxa de ado√ß√£o - Luna' },
                { type: 'income', category: 'event', amount: 800.00, date: '2024-02-01', description: 'Feira de ado√ß√£o - Shopping' },
                { type: 'income', category: 'donation', amount: 300.00, date: '2024-02-10', description: 'Doa√ß√£o - Ana Costa' },
                { type: 'income', category: 'donation', amount: 150.00, date: '2024-02-15', description: 'Doa√ß√£o - Pedro Lima' },
                
                // Despesas
                { type: 'expense', category: 'veterinary', amount: 180.00, date: '2024-01-18', description: 'Consulta - Max (Dr. Carlos)' },
                { type: 'expense', category: 'veterinary', amount: 120.00, date: '2024-01-22', description: 'Vacina - Bella (Dr. Ana)' },
                { type: 'expense', category: 'food', amount: 85.00, date: '2024-01-28', description: 'Ra√ß√£o Premium 15kg' },
                { type: 'expense', category: 'veterinary', amount: 200.00, date: '2024-02-05', description: 'Castra√ß√£o - Thor (Dr. Carlos)' },
                { type: 'expense', category: 'supplies', amount: 45.00, date: '2024-02-08', description: 'Coleiras e guias' },
                { type: 'expense', category: 'food', amount: 90.00, date: '2024-02-12', description: 'Ra√ß√£o filhotes 10kg' },
                { type: 'expense', category: 'veterinary', amount: 75.00, date: '2024-02-18', description: 'Verm√≠fugo - Lola (Dr. Ana)' },
                { type: 'expense', category: 'maintenance', amount: 120.00, date: '2024-02-20', description: 'Limpeza e manuten√ß√£o canil' },
                { type: 'expense', category: 'supplies', amount: 35.00, date: '2024-02-22', description: 'Produtos de limpeza' },
                { type: 'expense', category: 'veterinary', amount: 150.00, date: '2024-03-05', description: 'Exames - Nina (Dr. Ana)' },
                { type: 'expense', category: 'veterinary', amount: 300.00, date: '2024-03-10', description: 'Cirurgia - Rex (Dr. Carlos)' },
                { type: 'expense', category: 'veterinary', amount: 95.00, date: '2024-03-15', description: 'Consulta - Mimi (Dr. Ana)' },
                { type: 'expense', category: 'veterinary', amount: 220.00, date: '2024-03-20', description: 'Tratamento - Bob (Dr. Carlos)' },
                { type: 'expense', category: 'veterinary', amount: 80.00, date: '2024-03-25', description: 'Vacinas - Princesa (Dr. Ana)' },
                { type: 'expense', category: 'veterinary', amount: 180.00, date: '2024-04-02', description: 'Castra√ß√£o - Simba (Dr. Carlos)' },
                { type: 'expense', category: 'veterinary', amount: 65.00, date: '2024-04-08', description: 'Consulta - Mel (Dr. Ana)' }
            ];
            
            // Adicionar cada transa√ß√£o
            sampleTransactions.forEach(transaction => {
                adminData.addTransaction(transaction);
            });
            
            console.log('‚úÖ Dados de exemplo adicionados!');
        }
        
        // Fun√ß√£o para carregar gr√°ficos financeiros
        function loadFinancialCharts() {
            console.log('üìà Carregando gr√°ficos financeiros...');
            
            // Carregar gr√°fico de Receita vs Despesas
            loadRevenueExpensesChart();
            
            // Carregar gr√°fico de Distribui√ß√£o de Gastos
            loadExpensesDistributionChart();
        }
        
        function loadRevenueExpensesChart() {
            const chartContainer = document.getElementById('revenue-expenses-chart');
            if (!chartContainer) return;
            
            const transactions = adminData.getTransactions();
            
            // Agrupar por m√™s
            const monthlyData = {};
            transactions.forEach(transaction => {
                const date = new Date(transaction.date);
                const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
                
                if (!monthlyData[monthKey]) {
                    monthlyData[monthKey] = { income: 0, expenses: 0 };
                }
                
                if (transaction.type === 'income') {
                    monthlyData[monthKey].income += transaction.amount;
                } else {
                    monthlyData[monthKey].expenses += transaction.amount;
                }
            });
            
            // Criar gr√°fico simulado
            const months = Object.keys(monthlyData).sort().slice(-6); // √öltimos 6 meses
            const chartData = months.map(month => {
                const data = monthlyData[month] || { income: 0, expenses: 0 };
                return {
                    month: new Date(month + '-01').toLocaleDateString('pt-BR', { month: 'short', year: '2-digit' }),
                    income: data.income,
                    expenses: data.expenses
                };
            });
            
            // Renderizar gr√°fico simulado
            chartContainer.innerHTML = `
                <div class="chart-placeholder">
                    <div class="chart-placeholder-icon">üìä</div>
                    <div class="chart-placeholder-text">Receita vs Despesas</div>
                    <div class="chart-placeholder-subtitle">
                        ${chartData.length > 0 ? 
                            `√öltimos ${chartData.length} meses ‚Ä¢ Total: R$ ${chartData.reduce((sum, d) => sum + d.income, 0).toFixed(2)} receitas` :
                            'Adicione transa√ß√µes para ver o gr√°fico'
                        }
                    </div>
                    ${chartData.length > 0 ? `
                        <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                            ${chartData.map(d => `${d.month}: +R$ ${d.income.toFixed(2)} / -R$ ${d.expenses.toFixed(2)}`).join(' ‚Ä¢ ')}
                        </div>
                    ` : ''}
                </div>
            `;
        }
        
        function loadExpensesDistributionChart() {
            const chartContainer = document.getElementById('expenses-distribution-chart');
            if (!chartContainer) return;
            
            const transactions = adminData.getTransactions();
            const expenses = transactions.filter(t => t.type === 'expense');
            
            // Agrupar por categoria
            const categoryData = {};
            expenses.forEach(expense => {
                if (!categoryData[expense.category]) {
                    categoryData[expense.category] = 0;
                }
                categoryData[expense.category] += expense.amount;
            });
            
            const categories = Object.entries(categoryData)
                .sort(([,a], [,b]) => b - a)
                .map(([category, amount]) => ({
                    category: getCategoryText(category),
                    amount: amount,
                    percentage: expenses.length > 0 ? (amount / expenses.reduce((sum, e) => sum + e.amount, 0) * 100).toFixed(1) : 0
                }));
            
            // Renderizar gr√°fico simulado
            chartContainer.innerHTML = `
                <div class="chart-placeholder">
                    <div class="chart-placeholder-icon">ü•ß</div>
                    <div class="chart-placeholder-text">Distribui√ß√£o de Gastos</div>
                    <div class="chart-placeholder-subtitle">
                        ${categories.length > 0 ? 
                            `${categories.length} categorias ‚Ä¢ Total: R$ ${categories.reduce((sum, c) => sum + c.amount, 0).toFixed(2)}` :
                            'Adicione despesas para ver a distribui√ß√£o'
                        }
                    </div>
                    ${categories.length > 0 ? `
                        <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8; text-align: left;">
                            ${categories.slice(0, 4).map(c => `
                                <div style="margin: 0.5rem 0;">
                                    <strong>${c.category}:</strong> R$ ${c.amount.toFixed(2)} (${c.percentage}%)
                                </div>
                            `).join('')}
                            ${categories.length > 4 ? `<div style="opacity: 0.6;">+${categories.length - 4} outras categorias</div>` : ''}
                        </div>
                    ` : ''}
                </div>
            `;
        }
        
        function updateRevenueChart() {
            showAlert('Gr√°fico de receitas atualizado!', 'info');
            loadRevenueExpensesChart();
        }
        
        // Fun√ß√£o para carregar dados de exemplo (bot√£o)
        function loadSampleData() {
            if (confirm('Isso ir√° adicionar dados de exemplo para demonstra√ß√£o. Continuar?')) {
                // Limpar dados existentes
                localStorage.removeItem('ligaDoBem_transactions');
                
                // For√ßar adi√ß√£o de dados de exemplo
                const sampleTransactions = [
                    // Receitas
                    { type: 'income', category: 'donation', amount: 500.00, date: '2024-01-15', description: 'Doa√ß√£o - Maria Silva' },
                    { type: 'income', category: 'donation', amount: 250.00, date: '2024-01-20', description: 'Doa√ß√£o - Jo√£o Santos' },
                    { type: 'income', category: 'adoption', amount: 100.00, date: '2024-01-25', description: 'Taxa de ado√ß√£o - Luna' },
                    { type: 'income', category: 'event', amount: 800.00, date: '2024-02-01', description: 'Feira de ado√ß√£o - Shopping' },
                    { type: 'income', category: 'donation', amount: 300.00, date: '2024-02-10', description: 'Doa√ß√£o - Ana Costa' },
                    { type: 'income', category: 'donation', amount: 150.00, date: '2024-02-15', description: 'Doa√ß√£o - Pedro Lima' },
                    { type: 'income', category: 'donation', amount: 400.00, date: '2024-03-01', description: 'Doa√ß√£o - Empresa XYZ' },
                    { type: 'income', category: 'event', amount: 600.00, date: '2024-03-10', description: 'Bazar beneficente' },
                    
                    // Despesas
                    { type: 'expense', category: 'veterinary', amount: 180.00, date: '2024-01-18', description: 'Consulta - Max (Dr. Carlos)' },
                    { type: 'expense', category: 'veterinary', amount: 120.00, date: '2024-01-22', description: 'Vacina - Bella (Dr. Ana)' },
                    { type: 'expense', category: 'food', amount: 85.00, date: '2024-01-28', description: 'Ra√ß√£o Premium 15kg' },
                    { type: 'expense', category: 'veterinary', amount: 200.00, date: '2024-02-05', description: 'Castra√ß√£o - Thor (Dr. Carlos)' },
                    { type: 'expense', category: 'supplies', amount: 45.00, date: '2024-02-08', description: 'Coleiras e guias' },
                    { type: 'expense', category: 'food', amount: 90.00, date: '2024-02-12', description: 'Ra√ß√£o filhotes 10kg' },
                    { type: 'expense', category: 'veterinary', amount: 75.00, date: '2024-02-18', description: 'Verm√≠fugo - Lola (Dr. Ana)' },
                    { type: 'expense', category: 'maintenance', amount: 120.00, date: '2024-02-20', description: 'Limpeza e manuten√ß√£o canil' },
                    { type: 'expense', category: 'supplies', amount: 35.00, date: '2024-02-22', description: 'Produtos de limpeza' },
                    { type: 'expense', category: 'veterinary', amount: 150.00, date: '2024-03-05', description: 'Exames - Nina (Dr. Ana)' },
                    { type: 'expense', category: 'food', amount: 95.00, date: '2024-03-12', description: 'Ra√ß√£o especial gatos 12kg' },
                    { type: 'expense', category: 'other', amount: 80.00, date: '2024-03-15', description: 'Transporte para feira' },
                    { type: 'expense', category: 'veterinary', amount: 300.00, date: '2024-03-18', description: 'Cirurgia - Rex (Dr. Carlos)' },
                    { type: 'expense', category: 'veterinary', amount: 95.00, date: '2024-03-22', description: 'Consulta - Mimi (Dr. Ana)' },
                    { type: 'expense', category: 'veterinary', amount: 220.00, date: '2024-03-25', description: 'Tratamento - Bob (Dr. Carlos)' },
                    { type: 'expense', category: 'veterinary', amount: 80.00, date: '2024-04-01', description: 'Vacinas - Princesa (Dr. Ana)' },
                    { type: 'expense', category: 'veterinary', amount: 180.00, date: '2024-04-05', description: 'Castra√ß√£o - Simba (Dr. Carlos)' },
                    { type: 'expense', category: 'veterinary', amount: 65.00, date: '2024-04-10', description: 'Consulta - Mel (Dr. Ana)' },
                    { type: 'expense', category: 'veterinary', amount: 140.00, date: '2024-04-15', description: 'Medicamentos - Thor (Dr. Carlos)' }
                ];
                
                // Adicionar cada transa√ß√£o
                sampleTransactions.forEach(transaction => {
                    adminData.addTransaction(transaction);
                });
                
                // Recarregar a p√°gina de transpar√™ncia
                loadTransactions();
                
                showAlert('‚úÖ Dados de exemplo carregados com sucesso! Veja os gr√°ficos abaixo.', 'success');
            }
        }
        
        function updateExpensesChart() {
            showAlert('Gr√°fico de gastos atualizado!', 'info');
            loadExpensesDistributionChart();
        }
        
        function handleTransactionSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const transactionData = Object.fromEntries(formData);
            
            // Converter amount para n√∫mero
            transactionData.amount = parseFloat(transactionData.amount);
            
            adminData.addTransaction(transactionData);
            showAlert('Transa√ß√£o adicionada com sucesso!', 'success');
            cancelTransactionForm();
            loadTransactions();
        }
        
        function editTransaction(id) {
            const transaction = adminData.getTransactions().find(t => t.id === id);
            if (transaction) {
                // Implementar modal de edi√ß√£o
                showAlert('Funcionalidade de edi√ß√£o em desenvolvimento!', 'info');
            }
        }
        
        function deleteTransaction(id) {
            if (confirm('Tem certeza que deseja excluir esta transa√ß√£o?')) {
                adminData.deleteTransaction(id);
                showAlert('Transa√ß√£o exclu√≠da com sucesso!', 'success');
                loadTransactions();
            }
        }

        // Gerenciamento de Eventos
        function toggleEventForm() {
            const form = document.getElementById('event-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('event-name').focus();
            }
        }

        function cancelEventForm() {
            document.getElementById('event-form').style.display = 'none';
            document.getElementById('event-form').reset();
        }

        function handleEventSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const eventData = Object.fromEntries(formData);
            
            adminData.addEvent(eventData);
            showAlert('Evento criado com sucesso!', 'success');
            cancelEventForm();
            loadEvents();
        }

        function loadEvents() {
            const events = adminData.getEvents();
            const tbody = document.getElementById('events-table-body');
            
            tbody.innerHTML = events.map(event => `
                <tr>
                    <td>${event.name}</td>
                    <td>${event.type}</td>
                    <td>${new Date(event.date).toLocaleDateString('pt-BR')} ${event.time}</td>
                    <td>${event.location}</td>
                    <td>${event.participants ? event.participants.length : 0}</td>
                    <td><span class="status-badge status-${event.status.toLowerCase()}">${event.status}</span></td>
                    <td>
                        <button class="btn btn-small btn-primary" onclick="editEvent(${event.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deleteEvent(${event.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function deleteEvent(id) {
            if (confirm('Tem certeza que deseja excluir este evento?')) {
                adminData.deleteEvent(id);
                showAlert('Evento exclu√≠do com sucesso!', 'success');
                loadEvents();
            }
        }

        // Gerenciamento de Doa√ß√µes
        function handleDonationSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const donationData = Object.fromEntries(formData);
            
            adminData.addDonation(donationData);
            showAlert('Doa√ß√£o registrada com sucesso!', 'success');
            document.getElementById('donation-form').reset();
            loadDonations();
        }

        function loadDonations() {
            const donations = adminData.getDonations();
            const tbody = document.getElementById('donations-table-body');
            
            // Calculate statistics
            const totalDonations = donations.reduce((sum, d) => sum + parseFloat(d.amount || 0), 0);
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyDonations = donations
                .filter(d => {
                    const donationDate = new Date(d.date);
                    return donationDate.getMonth() === currentMonth && donationDate.getFullYear() === currentYear;
                })
                .reduce((sum, d) => sum + parseFloat(d.amount || 0), 0);
            
            const uniqueDonors = [...new Set(donations.map(d => d.donorName))].length;
            
            // Update statistics
            document.getElementById('total-donations').textContent = `R$ ${totalDonations.toFixed(2)}`;
            document.getElementById('monthly-donations').textContent = `R$ ${monthlyDonations.toFixed(2)}`;
            document.getElementById('donors-count').textContent = uniqueDonors;
            
            // Load table
            tbody.innerHTML = donations.map(donation => `
                <tr>
                    <td>${donation.donorName}</td>
                    <td>R$ ${parseFloat(donation.amount).toFixed(2)}</td>
                    <td>${donation.type}</td>
                    <td>${donation.purpose}</td>
                    <td>${new Date(donation.date).toLocaleDateString('pt-BR')}</td>
                </tr>
            `).join('');
        }

        // Fun√ß√£o auxiliar para carregar op√ß√µes de pets
        function loadPetOptions(selectId) {
            const pets = adminData.getPets().filter(pet => pet.status === 'Dispon√≠vel');
            const select = document.getElementById(selectId);
            
            select.innerHTML = '<option value="">Selecione um pet...</option>' + 
                pets.map(pet => `<option value="${pet.id}">${pet.emoji} ${pet.name}</option>`).join('');
        }

        // Sidebar toggle functions
        function toggleSidebar() {
            const sidebar = document.getElementById('admin-sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const toggle = document.querySelector('.menu-toggle');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            toggle.classList.toggle('active');
        }

        function closeSidebar() {
            const sidebar = document.getElementById('admin-sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const toggle = document.querySelector('.menu-toggle');
            
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            toggle.classList.remove('active');
        }

        // Atualizar badge de mensagens
        function updateMessagesBadge() {
            const messages = adminData.getMessages();
            const unreadCount = messages.filter(msg => !msg.read).length;
            const badge = document.getElementById('messages-badge');
            
            if (badge) {
                badge.textContent = unreadCount;
                badge.style.display = unreadCount > 0 ? 'block' : 'none';
            }
        }

        // User menu functions
        function toggleUserMenu() {
            const dropdown = document.querySelector('.user-dropdown');
            const menu = document.getElementById('user-menu');
            
            dropdown.classList.toggle('active');
            menu.classList.toggle('active');
        }

        function closeUserMenu() {
            const dropdown = document.querySelector('.user-dropdown');
            const menu = document.getElementById('user-menu');
            
            dropdown.classList.remove('active');
            menu.classList.remove('active');
        }

        function confirmLogout() {
            if (confirm('Tem certeza que deseja sair do sistema?')) {
                logout();
            }
            closeUserMenu();
        }

        function showUserProfile() {
            alert('Funcionalidade de configura√ß√µes em desenvolvimento!');
            closeUserMenu();
        }

        function showHelp() {
            alert('Funcionalidade de ajuda em desenvolvimento!');
            closeUserMenu();
        }

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const userDropdown = document.querySelector('.user-dropdown');
            if (!userDropdown.contains(event.target)) {
                closeUserMenu();
            }
        });

        // Inicializar badge de mensagens no carregamento
        document.addEventListener('DOMContentLoaded', function() {
            updateMessagesBadge();
        });
    </script>
</body>
</html>