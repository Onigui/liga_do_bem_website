<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administra√ß√£o - Liga do Bem</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-screen" class="login-container">
        <div class="login-box animate-in">
            <h1>üêæ Liga do Bem</h1>
            <h2>√Årea Administrativa</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Usu√°rio:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">Entrar</button>
            </form>
            <div id="login-error" class="alert alert-error" style="display: none; margin-top: 1rem;">
                Usu√°rio ou senha incorretos!
            </div>
        </div>
    </div>

    <!-- Interface Administrativa -->
    <div id="admin-interface" class="admin-container">
        <!-- Header -->
        <header class="admin-header">
            <div class="admin-logo">
                <span class="logo-icon">üêæ</span>
                <span class="logo-text">Liga do Bem</span>
                <span class="logo-subtitle">Administra√ß√£o</span>
            </div>
            
            <!-- Menu Toggle for Mobile -->
            <button class="menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <nav class="admin-nav" id="admin-nav">
                <!-- Dashboard -->
                <div class="nav-section">
                    <button class="nav-btn primary active" onclick="showSection('dashboard')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Dashboard</span>
                    </button>
                </div>
                
                <!-- Gest√£o de Animais -->
                <div class="nav-section">
                    <div class="nav-category">üêï Animais</div>
                    <button class="nav-btn" onclick="showSection('pets')">
                        <span class="nav-icon">üêæ</span>
                        <span class="nav-text">Pets</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('medical')">
                        <span class="nav-icon">üè•</span>
                        <span class="nav-text">Veterin√°rio</span>
                    </button>
                </div>
                
                <!-- Gest√£o de Pessoas -->
                <div class="nav-section">
                    <div class="nav-category">üë• Pessoas</div>
                    <button class="nav-btn" onclick="showSection('volunteers')">
                        <span class="nav-icon">üôã‚Äç‚ôÄÔ∏è</span>
                        <span class="nav-text">Volunt√°rios</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('visits')">
                        <span class="nav-icon">üëÅÔ∏è</span>
                        <span class="nav-text">Visitas</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('adoptions')">
                        <span class="nav-icon">‚ù§Ô∏è</span>
                        <span class="nav-text">Ado√ß√µes</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('sponsors')">
                        <span class="nav-icon">ü§ù</span>
                        <span class="nav-text">Padrinhos</span>
                    </button>
                </div>
                
                <!-- Atividades -->
                <div class="nav-section">
                    <div class="nav-category">üéØ Atividades</div>
                    <button class="nav-btn" onclick="showSection('events')">
                        <span class="nav-icon">üéâ</span>
                        <span class="nav-text">Eventos</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('donations')">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-text">Doa√ß√µes</span>
                    </button>
                </div>
                
                <!-- Sistema -->
                <div class="nav-section">
                    <div class="nav-category">‚öôÔ∏è Sistema</div>
                    <button class="nav-btn" onclick="showSection('messages')">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Mensagens</span>
                        <span class="nav-badge" id="messages-badge">0</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('stats')">
                        <span class="nav-icon">üìà</span>
                        <span class="nav-text">Relat√≥rios</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('content')">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-text">Conte√∫do</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('backup')">
                        <span class="nav-icon">üíæ</span>
                        <span class="nav-text">Backup</span>
                    </button>
                </div>
            </nav>
            
            <div class="admin-user">
                <span class="user-info">üë§ Admin</span>
                <button class="logout-btn" onclick="logout()">
                    <span class="logout-icon">üö™</span>
                    <span class="logout-text">Sair</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Dashboard -->
            <section id="dashboard-section" class="admin-section active">
                <h2 class="section-title">Dashboard</h2>
                <div class="dashboard-stats" id="dashboard-stats">
                    <!-- Stats will be loaded here -->
                </div>
                <div class="admin-form">
                    <h3>Resumo R√°pido</h3>
                    <div class="card-grid">
                        <div class="admin-card">
                            <div class="card-header">
                                <div class="card-title">Pets Dispon√≠veis</div>
                            </div>
                            <p id="available-pets-count">0</p>
                        </div>
                        <div class="admin-card">
                            <div class="card-header">
                                <div class="card-title">Mensagens N√£o Lidas</div>
                            </div>
                            <p id="unread-messages-count">0</p>
                        </div>
                        <div class="admin-card">
                            <div class="card-header">
                                <div class="card-title">√öltimas Atividades</div>
                            </div>
                            <div id="recent-activities">
                                <!-- Recent activities will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gerenciamento de Pets -->
            <section id="pets-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Pets</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Adicionar Novo Pet</h3>
                        <button class="btn btn-primary" onclick="togglePetForm()">+ Novo Pet</button>
                    </div>
                    
                    <form id="pet-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pet-name">Nome:</label>
                                <input type="text" id="pet-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="pet-type">Tipo:</label>
                                <select id="pet-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="C√£o">C√£o</option>
                                    <option value="Gata">Gata</option>
                                    <option value="Gato">Gato</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pet-age">Idade:</label>
                                <input type="text" id="pet-age" name="age" placeholder="Ex: 2 anos" required>
                            </div>
                            <div class="form-group">
                                <label for="pet-emoji">Emoji:</label>
                                <input type="text" id="pet-emoji" name="emoji" placeholder="üê∂" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pet-description">Descri√ß√£o:</label>
                            <textarea id="pet-description" name="description" required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Foto do Pet:</label>
                            <div class="photo-upload-container" id="pet-photo-upload" onclick="document.getElementById('pet-photo-input').click()">
                                <input type="file" id="pet-photo-input" class="photo-upload-input" accept="image/*" onchange="handlePhotoUpload(event, 'pet')">
                                <div class="photo-upload-icon">üì∑</div>
                                <div class="photo-upload-text" id="pet-photo-text">
                                    Clique aqui ou arraste uma foto do pet<br>
                                    <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
                                </div>
                                <div id="pet-photo-preview-container" style="display: none;">
                                    <img id="pet-photo-preview" class="photo-preview" alt="Preview da foto">
                                    <button type="button" class="remove-photo-btn" onclick="removePhoto('pet')">Remover Foto</button>
                                </div>
                            </div>
                            <div id="pet-photo-error" class="file-size-warning" style="display: none;"></div>
                        </div>
                        <div class="form-group">
                            <label>Tags:</label>
                            <div class="tags-input" id="pet-tags">
                                <input type="text" class="tag-input" placeholder="Digite uma tag e pressione Enter">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pet-status">Status:</label>
                            <select id="pet-status" name="status" required>
                                <option value="Dispon√≠vel">Dispon√≠vel</option>
                                <option value="Em Processo">Em Processo</option>
                                <option value="Adotado">Adotado</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Salvar Pet</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelPetForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Pets</h3>
                    <table class="data-table" id="pets-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>Idade</th>
                                <th>Status</th>
                                <th>Data</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="pets-table-body">
                            <!-- Pets will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Gerenciamento de Volunt√°rios -->
            <section id="volunteers-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Volunt√°rios</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Cadastrar Novo Volunt√°rio</h3>
                        <button class="btn btn-primary" onclick="toggleVolunteerForm()">+ Novo Volunt√°rio</button>
                    </div>
                    
                    <form id="volunteer-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-name">Nome Completo:</label>
                                <input type="text" id="volunteer-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="volunteer-email">Email:</label>
                                <input type="email" id="volunteer-email" name="email" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteer-phone">Telefone:</label>
                                <input type="text" id="volunteer-phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="volunteer-availability">Disponibilidade:</label>
                                <select id="volunteer-availability" name="availability" required>
                                    <option value="">Selecione...</option>
                                    <option value="Manh√£">Manh√£</option>
                                    <option value="Tarde">Tarde</option>
                                    <option value="Noite">Noite</option>
                                    <option value="Fins de semana">Fins de semana</option>
                                    <option value="Flex√≠vel">Flex√≠vel</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="volunteer-skills">Habilidades/Experi√™ncia:</label>
                            <textarea id="volunteer-skills" name="skills" placeholder="Ex: Veterin√°ria, Fotografia, Marketing, etc."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="volunteer-motivation">Motiva√ß√£o:</label>
                            <textarea id="volunteer-motivation" name="motivation" placeholder="Por que deseja ser volunt√°rio?"></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Cadastrar Volunt√°rio</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelVolunteerForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Volunt√°rios</h3>
                    <table class="data-table" id="volunteers-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Disponibilidade</th>
                                <th>Status</th>
                                <th>Pontos</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="volunteers-table-body">
                            <!-- Volunteers will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Agendamento de Visitas -->
            <section id="visits-section" class="admin-section">
                <h2 class="section-title">Agendamento de Visitas</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Agendar Nova Visita</h3>
                        <button class="btn btn-primary" onclick="toggleVisitForm()">+ Nova Visita</button>
                    </div>
                    
                    <form id="visit-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-visitor-name">Nome do Visitante:</label>
                                <input type="text" id="visit-visitor-name" name="visitorName" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-visitor-email">Email:</label>
                                <input type="email" id="visit-visitor-email" name="visitorEmail" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-visitor-phone">Telefone:</label>
                                <input type="text" id="visit-visitor-phone" name="visitorPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-pet">Pet de Interesse:</label>
                                <select id="visit-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="visit-date">Data da Visita:</label>
                                <input type="datetime-local" id="visit-date" name="dateScheduled" required>
                            </div>
                            <div class="form-group">
                                <label for="visit-type">Tipo de Visita:</label>
                                <select id="visit-type" name="type" required>
                                    <option value="Conhecer o pet">Conhecer o pet</option>
                                    <option value="Segunda visita">Segunda visita</option>
                                    <option value="Entrega">Entrega</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="visit-notes">Observa√ß√µes:</label>
                            <textarea id="visit-notes" name="notes" placeholder="Observa√ß√µes sobre a visita..."></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Agendar Visita</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelVisitForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Visitas Agendadas</h3>
                    <table class="data-table" id="visits-table">
                        <thead>
                            <tr>
                                <th>Visitante</th>
                                <th>Pet</th>
                                <th>Data/Hora</th>
                                <th>Tipo</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="visits-table-body">
                            <!-- Visits will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Processo de Ado√ß√£o -->
            <section id="adoptions-section" class="admin-section">
                <h2 class="section-title">Processo de Ado√ß√£o</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Iniciar Processo de Ado√ß√£o</h3>
                        <button class="btn btn-primary" onclick="toggleAdoptionForm()">+ Nova Ado√ß√£o</button>
                    </div>
                    
                    <form id="adoption-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-adopter-name">Nome do Adotante:</label>
                                <input type="text" id="adoption-adopter-name" name="adopterName" required>
                            </div>
                            <div class="form-group">
                                <label for="adoption-adopter-email">Email:</label>
                                <input type="email" id="adoption-adopter-email" name="adopterEmail" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-adopter-phone">Telefone:</label>
                                <input type="text" id="adoption-adopter-phone" name="adopterPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="adoption-pet">Pet:</label>
                                <select id="adoption-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="adoption-address">Endere√ßo Completo:</label>
                            <textarea id="adoption-address" name="address" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adoption-housing">Tipo de Moradia:</label>
                                <select id="adoption-housing" name="housingType" required>
                                    <option value="">Selecione...</option>
                                    <option value="Casa com quintal">Casa com quintal</option>
                                    <option value="Casa sem quintal">Casa sem quintal</option>
                                    <option value="Apartamento">Apartamento</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="adoption-experience">Experi√™ncia com Pets:</label>
                                <select id="adoption-experience" name="experience" required>
                                    <option value="">Selecione...</option>
                                    <option value="Primeira vez">Primeira vez</option>
                                    <option value="Pouca experi√™ncia">Pouca experi√™ncia</option>
                                    <option value="Experi√™ncia moderada">Experi√™ncia moderada</option>
                                    <option value="Muita experi√™ncia">Muita experi√™ncia</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="adoption-motivation">Motiva√ß√£o para Ado√ß√£o:</label>
                            <textarea id="adoption-motivation" name="motivation" required></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Iniciar Processo</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelAdoptionForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Processos de Ado√ß√£o</h3>
                    <table class="data-table" id="adoptions-table">
                        <thead>
                            <tr>
                                <th>Adotante</th>
                                <th>Pet</th>
                                <th>Data In√≠cio</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="adoptions-table-body">
                            <!-- Adoptions will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sistema de Padrinhos -->
            <section id="sponsors-section" class="admin-section">
                <h2 class="section-title">Sistema de Padrinhos/Madrinhas</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Cadastrar Padrinho/Madrinha</h3>
                        <button class="btn btn-primary" onclick="toggleSponsorForm()">+ Novo Padrinho</button>
                    </div>
                    
                    <form id="sponsor-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-name">Nome Completo:</label>
                                <input type="text" id="sponsor-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-email">Email:</label>
                                <input type="email" id="sponsor-email" name="email" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-phone">Telefone:</label>
                                <input type="text" id="sponsor-phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-pet">Pet Apadrinhado:</label>
                                <select id="sponsor-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sponsor-amount">Valor Mensal (R$):</label>
                                <input type="number" id="sponsor-amount" name="monthlyAmount" min="10" step="5" required>
                            </div>
                            <div class="form-group">
                                <label for="sponsor-payment">Forma de Pagamento:</label>
                                <select id="sponsor-payment" name="paymentMethod" required>
                                    <option value="">Selecione...</option>
                                    <option value="PIX">PIX</option>
                                    <option value="Transfer√™ncia">Transfer√™ncia</option>
                                    <option value="Dinheiro">Dinheiro</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Cadastrar Padrinho</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelSponsorForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Padrinhos/Madrinhas</h3>
                    <table class="data-table" id="sponsors-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Pet Apadrinhado</th>
                                <th>Valor Mensal</th>
                                <th>Total Doado</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="sponsors-table-body">
                            <!-- Sponsors will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Gest√£o Veterin√°ria -->
            <section id="medical-section" class="admin-section">
                <h2 class="section-title">Gest√£o Veterin√°ria</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Adicionar Registro M√©dico</h3>
                        <button class="btn btn-primary" onclick="toggleMedicalForm()">+ Novo Registro</button>
                    </div>
                    
                    <form id="medical-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-pet">Pet:</label>
                                <select id="medical-pet" name="petId" required>
                                    <option value="">Selecione um pet...</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="medical-type">Tipo de Procedimento:</label>
                                <select id="medical-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Consulta">Consulta</option>
                                    <option value="Vacina√ß√£o">Vacina√ß√£o</option>
                                    <option value="Castra√ß√£o">Castra√ß√£o</option>
                                    <option value="Cirurgia">Cirurgia</option>
                                    <option value="Exame">Exame</option>
                                    <option value="Medica√ß√£o">Medica√ß√£o</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-date">Data:</label>
                                <input type="date" id="medical-date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="medical-vet">Veterin√°rio:</label>
                                <input type="text" id="medical-vet" name="veterinarian" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="medical-description">Descri√ß√£o/Observa√ß√µes:</label>
                            <textarea id="medical-description" name="description" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medical-cost">Custo (R$):</label>
                                <input type="number" id="medical-cost" name="cost" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="medical-next">Pr√≥ximo Procedimento:</label>
                                <input type="date" id="medical-next" name="nextAppointment">
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Salvar Registro</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelMedicalForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Hist√≥rico M√©dico por Pet</h3>
                    <div class="form-group">
                        <label for="medical-filter-pet">Filtrar por Pet:</label>
                        <select id="medical-filter-pet" onchange="filterMedicalRecords()">
                            <option value="">Todos os pets</option>
                            <!-- Options will be loaded dynamically -->
                        </select>
                    </div>
                    <div id="medical-records-list">
                        <!-- Medical records will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Gerenciamento de Eventos -->
            <section id="events-section" class="admin-section">
                <h2 class="section-title">Gerenciamento de Eventos</h2>
                
                <div class="admin-form">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Criar Novo Evento</h3>
                        <button class="btn btn-primary" onclick="toggleEventForm()">+ Novo Evento</button>
                    </div>
                    
                    <form id="event-form" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-name">Nome do Evento:</label>
                                <input type="text" id="event-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="event-type">Tipo:</label>
                                <select id="event-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Feira de Ado√ß√£o">Feira de Ado√ß√£o</option>
                                    <option value="Campanha de Vacina√ß√£o">Campanha de Vacina√ß√£o</option>
                                    <option value="Arrecada√ß√£o">Arrecada√ß√£o</option>
                                    <option value="Palestra">Palestra</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-date">Data:</label>
                                <input type="date" id="event-date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="event-time">Hor√°rio:</label>
                                <input type="time" id="event-time" name="time" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="event-location">Local:</label>
                            <input type="text" id="event-location" name="location" required>
                        </div>
                        <div class="form-group">
                            <label for="event-description">Descri√ß√£o:</label>
                            <textarea id="event-description" name="description" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-capacity">Capacidade (pessoas):</label>
                                <input type="number" id="event-capacity" name="capacity" min="1">
                            </div>
                            <div class="form-group">
                                <label for="event-registration">Requer Inscri√ß√£o:</label>
                                <select id="event-registration" name="requiresRegistration">
                                    <option value="false">N√£o</option>
                                    <option value="true">Sim</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn btn-success">Criar Evento</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelEventForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Lista de Eventos</h3>
                    <table class="data-table" id="events-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Tipo</th>
                                <th>Data</th>
                                <th>Local</th>
                                <th>Participantes</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="events-table-body">
                            <!-- Events will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sistema de Doa√ß√µes -->
            <section id="donations-section" class="admin-section">
                <h2 class="section-title">Sistema de Doa√ß√µes</h2>
                
                <div class="admin-form">
                    <h3>Registrar Doa√ß√£o</h3>
                    <form id="donation-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="donation-donor-name">Nome do Doador:</label>
                                <input type="text" id="donation-donor-name" name="donorName" required>
                            </div>
                            <div class="form-group">
                                <label for="donation-donor-email">Email:</label>
                                <input type="email" id="donation-donor-email" name="donorEmail">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="donation-amount">Valor (R$):</label>
                                <input type="number" id="donation-amount" name="amount" min="1" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="donation-type">Tipo:</label>
                                <select id="donation-type" name="type" required>
                                    <option value="">Selecione...</option>
                                    <option value="Dinheiro">Dinheiro</option>
                                    <option value="PIX">PIX</option>
                                    <option value="Transfer√™ncia">Transfer√™ncia</option>
                                    <option value="Ra√ß√£o">Ra√ß√£o</option>
                                    <option value="Medicamentos">Medicamentos</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="donation-purpose">Finalidade:</label>
                            <select id="donation-purpose" name="purpose">
                                <option value="Geral">Geral</option>
                                <option value="Veterin√°rio">Veterin√°rio</option>
                                <option value="Ra√ß√£o">Ra√ß√£o</option>
                                <option value="Medicamentos">Medicamentos</option>
                                <option value="Castra√ß√£o">Castra√ß√£o</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="donation-notes">Observa√ß√µes:</label>
                            <textarea id="donation-notes" name="notes"></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Registrar Doa√ß√£o</button>
                    </form>
                </div>

                <div class="admin-form">
                    <h3>Hist√≥rico de Doa√ß√µes</h3>
                    <div class="donation-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="total-donations">R$ 0,00</div>
                            <div class="stat-label">Total Arrecadado</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="monthly-donations">R$ 0,00</div>
                            <div class="stat-label">Este M√™s</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="donors-count">0</div>
                            <div class="stat-label">Doadores</div>
                        </div>
                    </div>
                    <table class="data-table" id="donations-table">
                        <thead>
                            <tr>
                                <th>Doador</th>
                                <th>Valor</th>
                                <th>Tipo</th>
                                <th>Finalidade</th>
                                <th>Data</th>
                            </tr>
                        </thead>
                        <tbody id="donations-table-body">
                            <!-- Donations will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Estat√≠sticas -->
            <section id="stats-section" class="admin-section">
                <h2 class="section-title">Gerenciar Estat√≠sticas</h2>
                
                <div class="admin-form">
                    <h3>Atualizar N√∫meros</h3>
                    <form id="stats-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="animals-rescued">Animais Resgatados:</label>
                                <input type="number" id="animals-rescued" name="animalsRescued" required>
                            </div>
                            <div class="form-group">
                                <label for="adoptions-completed">Ado√ß√µes Realizadas:</label>
                                <input type="number" id="adoptions-completed" name="adoptionsCompleted" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="volunteers-active">Volunt√°rios Ativos:</label>
                                <input type="number" id="volunteers-active" name="volunteersActive" required>
                            </div>
                            <div class="form-group">
                                <label for="partners-count">Parceiros:</label>
                                <input type="number" id="partners-count" name="partnersCount" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Atualizar Estat√≠sticas</button>
                    </form>
                </div>
            </section>

            <!-- Conte√∫do -->
            <section id="content-section" class="admin-section">
                <h2 class="section-title">Gerenciar Conte√∫do</h2>
                
                <div class="admin-form">
                    <h3>Conte√∫do da P√°gina Principal</h3>
                    <form id="content-form">
                        <div class="form-group">
                            <label for="hero-title">T√≠tulo Principal:</label>
                            <input type="text" id="hero-title" name="heroTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="hero-subtitle">Subt√≠tulo:</label>
                            <textarea id="hero-subtitle" name="heroSubtitle" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="about-text">Texto Sobre N√≥s:</label>
                            <textarea id="about-text" name="aboutText" required></textarea>
                        </div>
                        <h4>Informa√ß√µes de Contato</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contact-phone">Telefone:</label>
                                <input type="text" id="contact-phone" name="contactPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="contact-email">Email:</label>
                                <input type="email" id="contact-email" name="contactEmail" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-address">Endere√ßo:</label>
                            <input type="text" id="contact-address" name="contactAddress" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Conte√∫do</button>
                    </form>
                </div>
            </section>

            <!-- Mensagens -->
            <section id="messages-section" class="admin-section">
                <h2 class="section-title">Mensagens de Contato</h2>
                
                <div class="admin-form">
                    <div id="messages-list">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Backup -->
            <section id="backup-section" class="admin-section">
                <h2 class="section-title">Backup e Restaura√ß√£o</h2>
                
                <div class="admin-form">
                    <h3>Backup dos Dados</h3>
                    <p>Fa√ßa backup de todos os dados do sistema (pets, estat√≠sticas, conte√∫do e mensagens).</p>
                    <button class="btn btn-primary" onclick="exportData()">Baixar Backup</button>
                </div>

                <div class="admin-form">
                    <h3>Restaurar Dados</h3>
                    <p>Restaure dados de um arquivo de backup anterior.</p>
                    <div class="form-group">
                        <label for="backup-file">Arquivo de Backup:</label>
                        <input type="file" id="backup-file" accept=".json">
                    </div>
                    <button class="btn btn-danger" onclick="importData()">Restaurar Backup</button>
                </div>

                <div class="admin-form">
                    <h3>Resetar Sistema</h3>
                    <p style="color: #dc3545; font-weight: bold;">‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o ir√° apagar todos os dados e restaurar os dados padr√£o!</p>
                    <button class="btn btn-danger" onclick="resetSystem()">Resetar para Padr√£o</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para Editar Pet -->
    <div id="edit-pet-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Editar Pet</h3>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <form id="edit-pet-form">
                <input type="hidden" id="edit-pet-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-pet-name">Nome:</label>
                        <input type="text" id="edit-pet-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-pet-type">Tipo:</label>
                        <select id="edit-pet-type" name="type" required>
                            <option value="C√£o">C√£o</option>
                            <option value="Gata">Gata</option>
                            <option value="Gato">Gato</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-pet-age">Idade:</label>
                        <input type="text" id="edit-pet-age" name="age" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-pet-emoji">Emoji:</label>
                        <input type="text" id="edit-pet-emoji" name="emoji" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-pet-description">Descri√ß√£o:</label>
                    <textarea id="edit-pet-description" name="description" required></textarea>
                </div>
                <div class="form-group">
                    <label>Foto do Pet:</label>
                    <div class="photo-upload-container" id="edit-pet-photo-upload" onclick="document.getElementById('edit-pet-photo-input').click()">
                        <input type="file" id="edit-pet-photo-input" class="photo-upload-input" accept="image/*" onchange="handlePhotoUpload(event, 'edit-pet')">
                        <div class="photo-upload-icon">üì∑</div>
                        <div class="photo-upload-text" id="edit-pet-photo-text">
                            Clique aqui ou arraste uma foto do pet<br>
                            <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
                        </div>
                        <div id="edit-pet-photo-preview-container" style="display: none;">
                            <img id="edit-pet-photo-preview" class="photo-preview" alt="Preview da foto">
                            <button type="button" class="remove-photo-btn" onclick="removePhoto('edit-pet')">Remover Foto</button>
                        </div>
                    </div>
                    <div id="edit-pet-photo-error" class="file-size-warning" style="display: none;"></div>
                </div>
                <div class="form-group">
                    <label>Tags:</label>
                    <div class="tags-input" id="edit-pet-tags">
                        <input type="text" class="tag-input" placeholder="Digite uma tag e pressione Enter">
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-pet-status">Status:</label>
                    <select id="edit-pet-status" name="status" required>
                        <option value="Dispon√≠vel">Dispon√≠vel</option>
                        <option value="Em Processo">Em Processo</option>
                        <option value="Adotado">Adotado</option>
                    </select>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn btn-success">Salvar Altera√ß√µes</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="admin-data.js"></script>
    <script>
        // Vari√°veis globais
        let currentEditingPet = null;
        let petTags = [];
        let editPetTags = [];
        let currentPetPhoto = null;
        let currentEditPetPhoto = null;

        // Autentica√ß√£o simples
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'ligadobem2024'
        };

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            setupEventListeners();
            setupDragAndDrop('pet-photo-upload', 'pet');
            setupDragAndDrop('edit-pet-photo-upload', 'edit-pet');
        });

        function checkAuth() {
            const isLoggedIn = sessionStorage.getItem('ligaDoBem_admin_logged');
            if (isLoggedIn) {
                showAdminInterface();
            } else {
                showLoginScreen();
            }
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Pet form
            document.getElementById('pet-form').addEventListener('submit', handlePetSubmit);
            document.getElementById('edit-pet-form').addEventListener('submit', handleEditPetSubmit);
            
            // Volunteer form
            document.getElementById('volunteer-form').addEventListener('submit', handleVolunteerSubmit);
            
            // Visit form
            document.getElementById('visit-form').addEventListener('submit', handleVisitSubmit);
            
            // Adoption form
            document.getElementById('adoption-form').addEventListener('submit', handleAdoptionSubmit);
            
            // Sponsor form
            document.getElementById('sponsor-form').addEventListener('submit', handleSponsorSubmit);
            
            // Medical form
            document.getElementById('medical-form').addEventListener('submit', handleMedicalSubmit);
            
            // Event form
            document.getElementById('event-form').addEventListener('submit', handleEventSubmit);
            
            // Donation form
            document.getElementById('donation-form').addEventListener('submit', handleDonationSubmit);
            
            // Stats form
            document.getElementById('stats-form').addEventListener('submit', handleStatsSubmit);
            
            // Content form
            document.getElementById('content-form').addEventListener('submit', handleContentSubmit);
            
            // Tags input
            setupTagsInput('pet-tags', petTags);
            setupTagsInput('edit-pet-tags', editPetTags);
        }

        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                sessionStorage.setItem('ligaDoBem_admin_logged', 'true');
                showAdminInterface();
            } else {
                document.getElementById('login-error').style.display = 'block';
            }
        }

        function logout() {
            sessionStorage.removeItem('ligaDoBem_admin_logged');
            showLoginScreen();
        }

        function showLoginScreen() {
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('admin-interface').style.display = 'none';
        }

        function showAdminInterface() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-interface').style.display = 'block';
            loadDashboard();
        }

        function showSection(sectionName) {
            // Fechar menu mobile se estiver aberto
            const nav = document.getElementById('admin-nav');
            nav.classList.remove('mobile-open');
            
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.add('active');
            
            // Add active class to clicked button
            if (event && event.target) {
                event.target.closest('.nav-btn').classList.add('active');
            }
            
            // Load section data
            switch(sectionName) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'pets':
                    loadPets();
                    break;
                case 'volunteers':
                    loadVolunteers();
                    break;
                case 'visits':
                    loadVisits();
                    break;
                case 'adoptions':
                    loadAdoptions();
                    break;
                case 'sponsors':
                    loadSponsors();
                    break;
                case 'medical':
                    loadMedicalRecords();
                    break;
                case 'events':
                    loadEvents();
                    break;
                case 'donations':
                    loadDonations();
                    break;
                case 'stats':
                    loadStats();
                    break;
                case 'content':
                    loadContent();
                    break;
                case 'messages':
                    loadMessages();
                    updateMessagesBadge();
                    break;
            }
        }

        function loadDashboard() {
            const stats = adminData.getStats();
            const pets = adminData.getPets();
            const messages = adminData.getMessages();
            const volunteers = adminData.getVolunteers();
            const visits = adminData.getVisits();
            const adoptions = adminData.getAdoptions();
            const sponsors = adminData.getSponsors();
            const events = adminData.getEvents();
            const donations = adminData.getDonations();
            
            // Load dashboard stats
            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-number">${pets.length}</div>
                    <div class="stat-label">Pets Cadastrados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${adoptions.filter(a => a.status === 'Aprovada').length}</div>
                    <div class="stat-label">Ado√ß√µes Realizadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${volunteers.filter(v => v.status === 'Ativo').length}</div>
                    <div class="stat-label">Volunt√°rios Ativos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${sponsors.filter(s => s.status === 'Ativo').length}</div>
                    <div class="stat-label">Padrinhos Ativos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${visits.filter(v => v.status === 'Agendada').length}</div>
                    <div class="stat-label">Visitas Agendadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${events.filter(e => e.status === 'Ativo').length}</div>
                    <div class="stat-label">Eventos Ativos</div>
                </div>
            `;
            document.getElementById('dashboard-stats').innerHTML = statsHtml;
            
            // Update quick stats
            const availablePets = pets.filter(pet => pet.status === 'Dispon√≠vel').length;
            const unreadMessages = messages.filter(msg => !msg.read).length;
            
            document.getElementById('available-pets-count').textContent = availablePets;
            document.getElementById('unread-messages-count').textContent = unreadMessages;
            
            // Recent activities with new data
            const totalDonations = donations.reduce((sum, d) => sum + parseFloat(d.amount || 0), 0);
            const recentActivities = `
                <p>‚Ä¢ ${pets.length} pets cadastrados</p>
                <p>‚Ä¢ ${volunteers.length} volunt√°rios registrados</p>
                <p>‚Ä¢ ${adoptions.length} processos de ado√ß√£o</p>
                <p>‚Ä¢ R$ ${totalDonations.toFixed(2)} em doa√ß√µes</p>
                <p>‚Ä¢ ${messages.length} mensagens recebidas</p>
            `;
            document.getElementById('recent-activities').innerHTML = recentActivities;
        }

        function loadPets() {
            const pets = adminData.getPets();
            const tbody = document.getElementById('pets-table-body');
            
            tbody.innerHTML = pets.map(pet => `
                <tr>
                    <td>${pet.emoji} ${pet.name}</td>
                    <td>${pet.type}</td>
                    <td>${pet.age}</td>
                    <td><span class="status-badge status-${pet.status.toLowerCase().replace(' ', '-')}">${pet.status}</span></td>
                    <td>${new Date(pet.dateAdded).toLocaleDateString('pt-BR')}</td>
                    <td>
                        <button class="btn btn-small btn-primary" onclick="editPet(${pet.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deletePet(${pet.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadStats() {
            const stats = adminData.getStats();
            document.getElementById('animals-rescued').value = stats.animalsRescued || 0;
            document.getElementById('adoptions-completed').value = stats.adoptionsCompleted || 0;
            document.getElementById('volunteers-active').value = stats.volunteersActive || 0;
            document.getElementById('partners-count').value = stats.partnersCount || 0;
        }

        function loadContent() {
            const content = adminData.getContent();
            document.getElementById('hero-title').value = content.heroTitle || '';
            document.getElementById('hero-subtitle').value = content.heroSubtitle || '';
            document.getElementById('about-text').value = content.aboutText || '';
            document.getElementById('contact-phone').value = content.contactInfo?.phone || '';
            document.getElementById('contact-email').value = content.contactInfo?.email || '';
            document.getElementById('contact-address').value = content.contactInfo?.address || '';
        }

        function loadMessages() {
            const messages = adminData.getMessages();
            const container = document.getElementById('messages-list');
            
            if (messages.length === 0) {
                container.innerHTML = '<p>Nenhuma mensagem recebida ainda.</p>';
                return;
            }
            
            container.innerHTML = messages.map(msg => `
                <div class="admin-card ${msg.read ? '' : 'unread'}" style="border-left: 4px solid ${msg.read ? '#28a745' : '#007bff'};">
                    <div class="card-header">
                        <div class="card-title">${msg.name}</div>
                        <div class="card-actions">
                            ${!msg.read ? `<button class="btn btn-small btn-primary" onclick="markAsRead(${msg.id})">Marcar como Lida</button>` : ''}
                            <button class="btn btn-small btn-danger" onclick="deleteMessage(${msg.id})">Excluir</button>
                        </div>
                    </div>
                    <p><strong>Email:</strong> ${msg.email}</p>
                    <p><strong>Data:</strong> ${new Date(msg.date).toLocaleString('pt-BR')}</p>
                    <p><strong>Mensagem:</strong></p>
                    <p>${msg.message}</p>
                </div>
            `).join('');
        }

        // Pet management functions
        function togglePetForm() {
            const form = document.getElementById('pet-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('pet-name').focus();
            }
        }

        function cancelPetForm() {
            document.getElementById('pet-form').style.display = 'none';
            document.getElementById('pet-form').reset();
            petTags = [];
            currentPetPhoto = null;
            updateTagsDisplay('pet-tags', petTags);
            resetPhotoUpload('pet');
        }

        function handlePetSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const petData = Object.fromEntries(formData);
            petData.tags = petTags;
            petData.photo = currentPetPhoto;
            
            adminData.addPet(petData);
            showAlert('Pet adicionado com sucesso!', 'success');
            cancelPetForm();
            loadPets();
            loadDashboard();
        }

        function editPet(id) {
            const pet = adminData.getPets().find(p => p.id === id);
            if (!pet) return;
            
            currentEditingPet = pet;
            editPetTags = [...pet.tags];
            currentEditPetPhoto = pet.photo;
            
            document.getElementById('edit-pet-id').value = pet.id;
            document.getElementById('edit-pet-name').value = pet.name;
            document.getElementById('edit-pet-type').value = pet.type;
            document.getElementById('edit-pet-age').value = pet.age;
            document.getElementById('edit-pet-emoji').value = pet.emoji;
            document.getElementById('edit-pet-description').value = pet.description;
            document.getElementById('edit-pet-status').value = pet.status;
            
            // Load existing photo
            if (pet.photo) {
                showPhotoPreview('edit-pet', pet.photo);
            } else {
                resetPhotoUpload('edit-pet');
            }
            
            updateTagsDisplay('edit-pet-tags', editPetTags);
            document.getElementById('edit-pet-modal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('edit-pet-modal').style.display = 'none';
            currentEditingPet = null;
            editPetTags = [];
            currentEditPetPhoto = null;
            resetPhotoUpload('edit-pet');
        }

        function handleEditPetSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const petData = Object.fromEntries(formData);
            petData.tags = editPetTags;
            petData.photo = currentEditPetPhoto;
            
            const id = parseInt(document.getElementById('edit-pet-id').value);
            adminData.updatePet(id, petData);
            showAlert('Pet atualizado com sucesso!', 'success');
            closeEditModal();
            loadPets();
        }

        function deletePet(id) {
            if (confirm('Tem certeza que deseja excluir este pet?')) {
                adminData.deletePet(id);
                showAlert('Pet exclu√≠do com sucesso!', 'success');
                loadPets();
                loadDashboard();
            }
        }

        // Stats management
        function handleStatsSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const statsData = {};
            for (let [key, value] of formData.entries()) {
                statsData[key] = parseInt(value);
            }
            
            adminData.updateStats(statsData);
            showAlert('Estat√≠sticas atualizadas com sucesso!', 'success');
            loadDashboard();
        }

        // Content management
        function handleContentSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const contentData = Object.fromEntries(formData);
            
            const updatedContent = {
                heroTitle: contentData.heroTitle,
                heroSubtitle: contentData.heroSubtitle,
                aboutText: contentData.aboutText,
                contactInfo: {
                    phone: contentData.contactPhone,
                    email: contentData.contactEmail,
                    address: contentData.contactAddress
                }
            };
            
            adminData.updateContent(updatedContent);
            showAlert('Conte√∫do atualizado com sucesso!', 'success');
        }

        // Message management
        function markAsRead(id) {
            adminData.markMessageAsRead(id);
            loadMessages();
            loadDashboard();
        }

        function deleteMessage(id) {
            if (confirm('Tem certeza que deseja excluir esta mensagem?')) {
                adminData.deleteMessage(id);
                showAlert('Mensagem exclu√≠da com sucesso!', 'success');
                loadMessages();
                loadDashboard();
            }
        }

        // Backup functions
        function exportData() {
            const data = adminData.exportData();
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `liga-do-bem-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showAlert('Backup baixado com sucesso!', 'success');
        }

        function importData() {
            const fileInput = document.getElementById('backup-file');
            const file = fileInput.files[0];
            
            if (!file) {
                showAlert('Por favor, selecione um arquivo de backup.', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    adminData.importData(data);
                    showAlert('Backup restaurado com sucesso!', 'success');
                    loadDashboard();
                    loadPets();
                    loadStats();
                    loadContent();
                    loadMessages();
                } catch (error) {
                    showAlert('Erro ao restaurar backup. Arquivo inv√°lido.', 'error');
                }
            };
            reader.readAsText(file);
        }

        function resetSystem() {
            if (confirm('ATEN√á√ÉO: Esta a√ß√£o ir√° apagar todos os dados! Tem certeza?')) {
                if (confirm('Esta a√ß√£o √© irrevers√≠vel! Confirma novamente?')) {
                    adminData.resetToDefaultData();
                    showAlert('Sistema resetado para os dados padr√£o!', 'success');
                    loadDashboard();
                    loadPets();
                    loadStats();
                    loadContent();
                    loadMessages();
                }
            }
        }

        // Tags management
        function setupTagsInput(containerId, tagsArray) {
            const container = document.getElementById(containerId);
            const input = container.querySelector('.tag-input');
            
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const tag = this.value.trim();
                    if (tag && !tagsArray.includes(tag)) {
                        tagsArray.push(tag);
                        updateTagsDisplay(containerId, tagsArray);
                        this.value = '';
                    }
                }
            });
        }

        function updateTagsDisplay(containerId, tagsArray) {
            const container = document.getElementById(containerId);
            const input = container.querySelector('.tag-input');
            
            // Remove existing tags
            container.querySelectorAll('.tag-item').forEach(tag => tag.remove());
            
            // Add tags
            tagsArray.forEach((tag, index) => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag-item';
                tagElement.innerHTML = `
                    ${tag}
                    <button type="button" class="tag-remove" onclick="removeTag('${containerId}', ${index})">&times;</button>
                `;
                container.insertBefore(tagElement, input);
            });
        }

        function removeTag(containerId, index) {
            if (containerId === 'pet-tags') {
                petTags.splice(index, 1);
                updateTagsDisplay(containerId, petTags);
            } else if (containerId === 'edit-pet-tags') {
                editPetTags.splice(index, 1);
                updateTagsDisplay(containerId, editPetTags);
            }
        }

        // Utility functions
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '9999';
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                document.body.removeChild(alertDiv);
            }, 3000);
        }

        // Photo upload functions
        function handlePhotoUpload(event, prefix) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (5MB limit)
            if (file.size > 5 * 1024 * 1024) {
                showPhotoError(prefix, 'Arquivo muito grande! M√°ximo 5MB.');
                return;
            }
            
            // Check file type
            if (!file.type.startsWith('image/')) {
                showPhotoError(prefix, 'Por favor, selecione apenas arquivos de imagem.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                if (prefix === 'pet') {
                    currentPetPhoto = base64;
                } else if (prefix === 'edit-pet') {
                    currentEditPetPhoto = base64;
                }
                showPhotoPreview(prefix, base64);
                hidePhotoError(prefix);
            };
            reader.readAsDataURL(file);
        }
        
        function showPhotoPreview(prefix, base64) {
            const previewContainer = document.getElementById(`${prefix}-photo-preview-container`);
            const preview = document.getElementById(`${prefix}-photo-preview`);
            const text = document.getElementById(`${prefix}-photo-text`);
            const icon = document.querySelector(`#${prefix}-photo-upload .photo-upload-icon`);
            
            preview.src = base64;
            previewContainer.style.display = 'block';
            text.innerHTML = '<span class="has-photo">‚úÖ Foto carregada com sucesso!</span>';
            icon.style.display = 'none';
        }
        
        function removePhoto(prefix) {
            if (prefix === 'pet') {
                currentPetPhoto = null;
            } else if (prefix === 'edit-pet') {
                currentEditPetPhoto = null;
            }
            resetPhotoUpload(prefix);
        }
        
        function resetPhotoUpload(prefix) {
            const previewContainer = document.getElementById(`${prefix}-photo-preview-container`);
            const text = document.getElementById(`${prefix}-photo-text`);
            const icon = document.querySelector(`#${prefix}-photo-upload .photo-upload-icon`);
            const input = document.getElementById(`${prefix}-photo-input`);
            
            previewContainer.style.display = 'none';
            text.innerHTML = `
                Clique aqui ou arraste uma foto do pet<br>
                <small>Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
            `;
            text.className = 'photo-upload-text';
            icon.style.display = 'block';
            input.value = '';
            hidePhotoError(prefix);
        }
        
        function showPhotoError(prefix, message) {
            const errorDiv = document.getElementById(`${prefix}-photo-error`);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }
        
        function hidePhotoError(prefix) {
            const errorDiv = document.getElementById(`${prefix}-photo-error`);
            errorDiv.style.display = 'none';
        }
        
        // Drag and drop functionality
        
        function setupDragAndDrop(containerId, prefix) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.addEventListener('dragover', function(e) {
                e.preventDefault();
                container.classList.add('dragover');
            });
            
            container.addEventListener('dragleave', function(e) {
                e.preventDefault();
                container.classList.remove('dragover');
            });
            
            container.addEventListener('drop', function(e) {
                e.preventDefault();
                container.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const input = document.getElementById(`${prefix}-photo-input`);
                    input.files = files;
                    handlePhotoUpload({ target: input }, prefix);
                }
            });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('edit-pet-modal');
            if (event.target === modal) {
                closeEditModal();
            }
        }

        // ========== NOVAS FUNCIONALIDADES ==========

        // Gerenciamento de Volunt√°rios
        function toggleVolunteerForm() {
            const form = document.getElementById('volunteer-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('volunteer-name').focus();
            }
        }

        function cancelVolunteerForm() {
            document.getElementById('volunteer-form').style.display = 'none';
            document.getElementById('volunteer-form').reset();
        }

        function handleVolunteerSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const volunteerData = Object.fromEntries(formData);
            
            adminData.addVolunteer(volunteerData);
            showAlert('Volunt√°rio cadastrado com sucesso!', 'success');
            cancelVolunteerForm();
            loadVolunteers();
            loadDashboard();
        }

        function loadVolunteers() {
            const volunteers = adminData.getVolunteers();
            const tbody = document.getElementById('volunteers-table-body');
            
            tbody.innerHTML = volunteers.map(volunteer => `
                <tr>
                    <td>${volunteer.name}</td>
                    <td>${volunteer.email}</td>
                    <td>${volunteer.phone}</td>
                    <td>${volunteer.availability}</td>
                    <td><span class="status-badge status-${volunteer.status.toLowerCase()}">${volunteer.status}</span></td>
                    <td><span class="volunteer-points">${volunteer.points} pts</span></td>
                    <td>
                        <button class="btn btn-small btn-primary" onclick="editVolunteer(${volunteer.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deleteVolunteer(${volunteer.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function deleteVolunteer(id) {
            if (confirm('Tem certeza que deseja excluir este volunt√°rio?')) {
                adminData.deleteVolunteer(id);
                showAlert('Volunt√°rio exclu√≠do com sucesso!', 'success');
                loadVolunteers();
            }
        }

        // Gerenciamento de Visitas
        function toggleVisitForm() {
            const form = document.getElementById('visit-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('visit-pet');
                document.getElementById('visit-visitor-name').focus();
            }
        }

        function cancelVisitForm() {
            document.getElementById('visit-form').style.display = 'none';
            document.getElementById('visit-form').reset();
        }

        function handleVisitSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const visitData = Object.fromEntries(formData);
            
            adminData.addVisit(visitData);
            showAlert('Visita agendada com sucesso!', 'success');
            cancelVisitForm();
            loadVisits();
        }

        function loadVisits() {
            const visits = adminData.getVisits();
            const pets = adminData.getPets();
            const tbody = document.getElementById('visits-table-body');
            
            tbody.innerHTML = visits.map(visit => {
                const pet = pets.find(p => p.id == visit.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td>${visit.visitorName}</td>
                        <td>${petName}</td>
                        <td>${new Date(visit.dateScheduled).toLocaleString('pt-BR')}</td>
                        <td>${visit.type}</td>
                        <td><span class="status-badge status-${visit.status.toLowerCase()}">${visit.status}</span></td>
                        <td>
                            <button class="btn btn-small btn-success" onclick="markVisitCompleted(${visit.id})">Realizada</button>
                            <button class="btn btn-small btn-danger" onclick="cancelVisit(${visit.id})">Cancelar</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function markVisitCompleted(id) {
            adminData.updateVisit(id, { status: 'Realizada' });
            showAlert('Visita marcada como realizada!', 'success');
            loadVisits();
        }

        function cancelVisit(id) {
            if (confirm('Tem certeza que deseja cancelar esta visita?')) {
                adminData.updateVisit(id, { status: 'Cancelada' });
                showAlert('Visita cancelada!', 'info');
                loadVisits();
            }
        }

        // Gerenciamento de Ado√ß√µes
        function toggleAdoptionForm() {
            const form = document.getElementById('adoption-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('adoption-pet');
                document.getElementById('adoption-adopter-name').focus();
            }
        }

        function cancelAdoptionForm() {
            document.getElementById('adoption-form').style.display = 'none';
            document.getElementById('adoption-form').reset();
        }

        function handleAdoptionSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const adoptionData = Object.fromEntries(formData);
            
            adminData.addAdoption(adoptionData);
            showAlert('Processo de ado√ß√£o iniciado com sucesso!', 'success');
            cancelAdoptionForm();
            loadAdoptions();
        }

        function loadAdoptions() {
            const adoptions = adminData.getAdoptions();
            const pets = adminData.getPets();
            const tbody = document.getElementById('adoptions-table-body');
            
            tbody.innerHTML = adoptions.map(adoption => {
                const pet = pets.find(p => p.id == adoption.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td>${adoption.adopterName}</td>
                        <td>${petName}</td>
                        <td>${new Date(adoption.dateStarted).toLocaleDateString('pt-BR')}</td>
                        <td><span class="status-badge status-${adoption.status.toLowerCase().replace(' ', '-')}">${adoption.status}</span></td>
                        <td>
                            <button class="btn btn-small btn-success" onclick="approveAdoption(${adoption.id})">Aprovar</button>
                            <button class="btn btn-small btn-danger" onclick="rejectAdoption(${adoption.id})">Reprovar</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function approveAdoption(id) {
            const adoption = adminData.getAdoptions().find(a => a.id === id);
            if (adoption) {
                adminData.updateAdoption(id, { status: 'Aprovada' });
                // Atualizar status do pet para "Adotado"
                adminData.updatePet(adoption.petId, { status: 'Adotado' });
                showAlert('Ado√ß√£o aprovada com sucesso!', 'success');
                loadAdoptions();
                loadPets();
                loadDashboard();
            }
        }

        function rejectAdoption(id) {
            if (confirm('Tem certeza que deseja reprovar esta ado√ß√£o?')) {
                adminData.updateAdoption(id, { status: 'Reprovada' });
                showAlert('Ado√ß√£o reprovada!', 'info');
                loadAdoptions();
            }
        }

        // Gerenciamento de Padrinhos
        function toggleSponsorForm() {
            const form = document.getElementById('sponsor-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('sponsor-pet');
                document.getElementById('sponsor-name').focus();
            }
        }

        function cancelSponsorForm() {
            document.getElementById('sponsor-form').style.display = 'none';
            document.getElementById('sponsor-form').reset();
        }

        function handleSponsorSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const sponsorData = Object.fromEntries(formData);
            
            adminData.addSponsor(sponsorData);
            showAlert('Padrinho cadastrado com sucesso!', 'success');
            cancelSponsorForm();
            loadSponsors();
        }

        function loadSponsors() {
            const sponsors = adminData.getSponsors();
            const pets = adminData.getPets();
            const tbody = document.getElementById('sponsors-table-body');
            
            tbody.innerHTML = sponsors.map(sponsor => {
                const pet = pets.find(p => p.id == sponsor.petId);
                const petName = pet ? `${pet.emoji} ${pet.name}` : 'Pet n√£o encontrado';
                
                return `
                    <tr>
                        <td>${sponsor.name}</td>
                        <td>${petName}</td>
                        <td><span class="sponsor-amount">R$ ${sponsor.monthlyAmount}</span></td>
                        <td>R$ ${sponsor.totalDonated.toFixed(2)}</td>
                        <td><span class="status-badge status-${sponsor.status.toLowerCase()}">${sponsor.status}</span></td>
                        <td>
                            <button class="btn btn-small btn-primary" onclick="editSponsor(${sponsor.id})">Editar</button>
                            <button class="btn btn-small btn-danger" onclick="deleteSponsor(${sponsor.id})">Excluir</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function deleteSponsor(id) {
            if (confirm('Tem certeza que deseja excluir este padrinho?')) {
                adminData.deleteSponsor(id);
                showAlert('Padrinho exclu√≠do com sucesso!', 'success');
                loadSponsors();
            }
        }

        // Gerenciamento M√©dico
        function toggleMedicalForm() {
            const form = document.getElementById('medical-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                loadPetOptions('medical-pet');
                document.getElementById('medical-pet').focus();
            }
        }

        function cancelMedicalForm() {
            document.getElementById('medical-form').style.display = 'none';
            document.getElementById('medical-form').reset();
        }

        function handleMedicalSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const medicalData = Object.fromEntries(formData);
            
            adminData.addMedicalRecord(parseInt(medicalData.petId), medicalData);
            showAlert('Registro m√©dico adicionado com sucesso!', 'success');
            cancelMedicalForm();
            loadMedicalRecords();
        }

        function loadMedicalRecords() {
            const pets = adminData.getPets();
            const container = document.getElementById('medical-records-list');
            
            // Load pet options for filter
            const filterSelect = document.getElementById('medical-filter-pet');
            filterSelect.innerHTML = '<option value="">Todos os pets</option>' + 
                pets.map(pet => `<option value="${pet.id}">${pet.emoji} ${pet.name}</option>`).join('');
            
            // Load all medical records
            let allRecords = [];
            pets.forEach(pet => {
                if (pet.medicalHistory && pet.medicalHistory.length > 0) {
                    pet.medicalHistory.forEach(record => {
                        allRecords.push({
                            ...record,
                            petName: `${pet.emoji} ${pet.name}`,
                            petId: pet.id
                        });
                    });
                }
            });
            
            // Sort by date (newest first)
            allRecords.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (allRecords.length === 0) {
                container.innerHTML = '<p>Nenhum registro m√©dico encontrado.</p>';
                return;
            }
            
            container.innerHTML = allRecords.map(record => `
                <div class="medical-record">
                    <div class="medical-record-header">
                        <div>
                            <span class="medical-record-type">${record.type}</span>
                            <strong>${record.petName}</strong>
                        </div>
                        <div class="medical-record-date">${new Date(record.date).toLocaleDateString('pt-BR')}</div>
                    </div>
                    <div class="medical-record-content">
                        <div class="medical-record-vet">Dr(a). ${record.veterinarian}</div>
                        <p>${record.description}</p>
                        ${record.cost ? `<div class="medical-record-cost">Custo: R$ ${parseFloat(record.cost).toFixed(2)}</div>` : ''}
                        ${record.nextAppointment ? `<p><strong>Pr√≥ximo procedimento:</strong> ${new Date(record.nextAppointment).toLocaleDateString('pt-BR')}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function filterMedicalRecords() {
            const selectedPetId = document.getElementById('medical-filter-pet').value;
            const pets = adminData.getPets();
            const container = document.getElementById('medical-records-list');
            
            let filteredRecords = [];
            
            if (selectedPetId) {
                const pet = pets.find(p => p.id == selectedPetId);
                if (pet && pet.medicalHistory) {
                    pet.medicalHistory.forEach(record => {
                        filteredRecords.push({
                            ...record,
                            petName: `${pet.emoji} ${pet.name}`,
                            petId: pet.id
                        });
                    });
                }
            } else {
                pets.forEach(pet => {
                    if (pet.medicalHistory && pet.medicalHistory.length > 0) {
                        pet.medicalHistory.forEach(record => {
                            filteredRecords.push({
                                ...record,
                                petName: `${pet.emoji} ${pet.name}`,
                                petId: pet.id
                            });
                        });
                    }
                });
            }
            
            filteredRecords.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (filteredRecords.length === 0) {
                container.innerHTML = '<p>Nenhum registro m√©dico encontrado.</p>';
                return;
            }
            
            container.innerHTML = filteredRecords.map(record => `
                <div class="medical-record">
                    <div class="medical-record-header">
                        <div>
                            <span class="medical-record-type">${record.type}</span>
                            <strong>${record.petName}</strong>
                        </div>
                        <div class="medical-record-date">${new Date(record.date).toLocaleDateString('pt-BR')}</div>
                    </div>
                    <div class="medical-record-content">
                        <div class="medical-record-vet">Dr(a). ${record.veterinarian}</div>
                        <p>${record.description}</p>
                        ${record.cost ? `<div class="medical-record-cost">Custo: R$ ${parseFloat(record.cost).toFixed(2)}</div>` : ''}
                        ${record.nextAppointment ? `<p><strong>Pr√≥ximo procedimento:</strong> ${new Date(record.nextAppointment).toLocaleDateString('pt-BR')}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Gerenciamento de Eventos
        function toggleEventForm() {
            const form = document.getElementById('event-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            if (form.style.display === 'block') {
                document.getElementById('event-name').focus();
            }
        }

        function cancelEventForm() {
            document.getElementById('event-form').style.display = 'none';
            document.getElementById('event-form').reset();
        }

        function handleEventSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const eventData = Object.fromEntries(formData);
            
            adminData.addEvent(eventData);
            showAlert('Evento criado com sucesso!', 'success');
            cancelEventForm();
            loadEvents();
        }

        function loadEvents() {
            const events = adminData.getEvents();
            const tbody = document.getElementById('events-table-body');
            
            tbody.innerHTML = events.map(event => `
                <tr>
                    <td>${event.name}</td>
                    <td>${event.type}</td>
                    <td>${new Date(event.date).toLocaleDateString('pt-BR')} ${event.time}</td>
                    <td>${event.location}</td>
                    <td>${event.participants ? event.participants.length : 0}</td>
                    <td><span class="status-badge status-${event.status.toLowerCase()}">${event.status}</span></td>
                    <td>
                        <button class="btn btn-small btn-primary" onclick="editEvent(${event.id})">Editar</button>
                        <button class="btn btn-small btn-danger" onclick="deleteEvent(${event.id})">Excluir</button>
                    </td>
                </tr>
            `).join('');
        }

        function deleteEvent(id) {
            if (confirm('Tem certeza que deseja excluir este evento?')) {
                adminData.deleteEvent(id);
                showAlert('Evento exclu√≠do com sucesso!', 'success');
                loadEvents();
            }
        }

        // Gerenciamento de Doa√ß√µes
        function handleDonationSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const donationData = Object.fromEntries(formData);
            
            adminData.addDonation(donationData);
            showAlert('Doa√ß√£o registrada com sucesso!', 'success');
            document.getElementById('donation-form').reset();
            loadDonations();
        }

        function loadDonations() {
            const donations = adminData.getDonations();
            const tbody = document.getElementById('donations-table-body');
            
            // Calculate statistics
            const totalDonations = donations.reduce((sum, d) => sum + parseFloat(d.amount || 0), 0);
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyDonations = donations
                .filter(d => {
                    const donationDate = new Date(d.date);
                    return donationDate.getMonth() === currentMonth && donationDate.getFullYear() === currentYear;
                })
                .reduce((sum, d) => sum + parseFloat(d.amount || 0), 0);
            
            const uniqueDonors = [...new Set(donations.map(d => d.donorName))].length;
            
            // Update statistics
            document.getElementById('total-donations').textContent = `R$ ${totalDonations.toFixed(2)}`;
            document.getElementById('monthly-donations').textContent = `R$ ${monthlyDonations.toFixed(2)}`;
            document.getElementById('donors-count').textContent = uniqueDonors;
            
            // Load table
            tbody.innerHTML = donations.map(donation => `
                <tr>
                    <td>${donation.donorName}</td>
                    <td>R$ ${parseFloat(donation.amount).toFixed(2)}</td>
                    <td>${donation.type}</td>
                    <td>${donation.purpose}</td>
                    <td>${new Date(donation.date).toLocaleDateString('pt-BR')}</td>
                </tr>
            `).join('');
        }

        // Fun√ß√£o auxiliar para carregar op√ß√µes de pets
        function loadPetOptions(selectId) {
            const pets = adminData.getPets().filter(pet => pet.status === 'Dispon√≠vel');
            const select = document.getElementById(selectId);
            
            select.innerHTML = '<option value="">Selecione um pet...</option>' + 
                pets.map(pet => `<option value="${pet.id}">${pet.emoji} ${pet.name}</option>`).join('');
        }

        // Menu mobile toggle
        function toggleMobileMenu() {
            const nav = document.getElementById('admin-nav');
            nav.classList.toggle('mobile-open');
        }

        // Atualizar badge de mensagens
        function updateMessagesBadge() {
            const messages = adminData.getMessages();
            const unreadCount = messages.filter(msg => !msg.read).length;
            const badge = document.getElementById('messages-badge');
            
            if (badge) {
                badge.textContent = unreadCount;
                badge.style.display = unreadCount > 0 ? 'block' : 'none';
            }
        }

        // Inicializar badge de mensagens no carregamento
        document.addEventListener('DOMContentLoaded', function() {
            updateMessagesBadge();
        });
    </script>
</body>
</html>